"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[6357],{6968:(S,y,a)=>{a.r(y),a.d(y,{EmployeeModule:()=>ne});var o=a(177),g=a(8498),u=a(9417),v=a(3471),p=a(9159),F=a(6695),e=a(3953),b=a(2356),D=a(3197),j=a(2016),d=a(2702),_=a(6661),i=a(9213),m=a(9947),l=a(8834);const f=()=>[5,10,20],C=t=>({id:t});function E(t,s){1&t&&(e.j41(0,"p"),e.EFF(1," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"),e.k0s())}function R(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0631\u0645\u0632 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function A(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.employeeCode)}}function P(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),e.k0s())}function w(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.positionCode)}}function k(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a"),e.k0s())}function x(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.name)}}function $(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a"),e.k0s())}function G(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.nameEn)}}function I(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"),e.k0s())}function O(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.phoneNumber)}}function M(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0627\u0644\u064a"),e.k0s())}function V(t,s){if(1&t&&(e.j41(0,"td",36),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.financialNumber)}}function B(t,s){1&t&&(e.j41(0,"th",35),e.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),e.k0s())}function Y(t,s){if(1&t&&(e.j41(0,"button",39)(1,"mat-icon"),e.EFF(2,"visibility"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.Y8G("queryParams",e.eq3(1,C,n.employeeCode))}}function z(t,s){if(1&t){const n=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(n);const c=e.XpG().$implicit,h=e.XpG(2);return e.Njj(h.onDelete(c.id))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function K(t,s){if(1&t&&(e.j41(0,"td",36),e.DNE(1,Y,3,3,"button",37)(2,z,3,0,"button",38),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.sharedFacade.hasPermission("ViewEmployee")),e.R7$(),e.Y8G("ngIf",n.sharedFacade.hasPermission("DeleteEmployee"))}}function L(t,s){1&t&&e.nrm(0,"tr",41)}function X(t,s){1&t&&e.nrm(0,"tr",42)}function U(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",21)(1,"table",22),e.qex(2,23),e.DNE(3,R,2,0,"th",24)(4,A,2,1,"td",25),e.bVm(),e.qex(5,26),e.DNE(6,P,2,0,"th",24)(7,w,2,1,"td",25),e.bVm(),e.qex(8,27),e.DNE(9,k,2,0,"th",24)(10,x,2,1,"td",25),e.bVm(),e.qex(11,28),e.DNE(12,$,2,0,"th",24)(13,G,2,1,"td",25),e.bVm(),e.qex(14,29),e.DNE(15,I,2,0,"th",24)(16,O,2,1,"td",25),e.bVm(),e.qex(17,30),e.DNE(18,M,2,0,"th",24)(19,V,2,1,"td",25),e.bVm(),e.qex(20,31),e.DNE(21,B,2,0,"th",24)(22,K,3,2,"td",25),e.bVm(),e.DNE(23,L,1,0,"tr",32)(24,X,1,0,"tr",33),e.k0s(),e.j41(25,"mat-paginator",34),e.bIt("page",function(c){e.eBV(n);const h=e.XpG();return e.Njj(h.onPageChange(c))}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("dataSource",n.dataSource),e.R7$(22),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",n.displayedColumns),e.R7$(),e.Y8G("pageIndex",n.currentPage)("length",n.totalCount)("pageSize",n.pageSize)("pageSizeOptions",e.lJ4(7,f))}}const J=[{path:"",component:(()=>{class t{onPageChange(n){this.currentPage=n.pageIndex,this.pageSize=n.pageSize,this.loadEmployeesPage(this.currentPage+1,this.pageSize,this.currentSearchType,this.currentText)}constructor(n,r,c){this.employeeFacade=n,this.fb=r,this.sharedFacade=c,this.displayedColumns=["employeeCode","positionCode","name","nameEn","phoneNumber","financialNumber","actions"],this.dataSource=new p.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0,this.currentText="",this.currentSearchType="",this.edit=!1,this.phoneNumberPattern="[0][9]{1}[1,2,4,3,5]{1}[0-9]{7}",this.loadEmployees=(h,T,N)=>{this.employeeFacade.GetEmployee(h,T)},this.loadEmployeesPage=(h,T,N,ie)=>{this.employeeFacade.GetEmployeePage(h,T,N,ie)},this.registerForm=this.fb.group({searchType:[null,u.k0.required],value:[null,u.k0.required],code:[null],phoneNumber:[null,[u.k0.minLength(10),u.k0.maxLength(10),u.k0.pattern(this.phoneNumberPattern)]],employeeName:[null]})}ngOnInit(){this.dataSource.paginator=this.paginator,this.edit=!1,this.loadEmployees(1,10),this.employeeFacade.employeePageSubject$.subscribe(n=>{this.dataSource.data=n.items,this.totalCount=n.totalCount})}onDelete(n){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0633\u062d\u061f")&&(this.edit=!1,this.employeeFacade.deleteEmployee(n),this.registerForm.reset())}onReset(){this.registerForm.reset(),this.registerForm.setErrors(null)}onSearch(){if(!(""!=this.registerForm.value.code&&null!=this.registerForm.value.code||""!=this.registerForm.value.employeeName&&null!=this.registerForm.value.employeeName||""!=this.registerForm.value.phoneNumber&&null!=this.registerForm.value.phoneNumber))return void this.sharedFacade.showMessage(v.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0628\u062d\u062b   ",[""]);if(this.registerForm.get("phoneNumber").invalid&&""!=this.registerForm.value.phoneNumber&&null!=this.registerForm.value.phoneNumber)return void this.sharedFacade.showMessage(v.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644  \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0635\u064a\u063a\u0629 \u0635\u062d\u064a\u062d\u0629  ",[""]);const n=""!=this.registerForm.get("employeeName").value&&null!=this.registerForm.get("employeeName").value?this.registerForm.value.employeeName:""!=this.registerForm.get("code").value&&null!=this.registerForm.get("code").value?this.registerForm.value.code:this.registerForm.value.phoneNumber,r=""!=this.registerForm.get("employeeName").value&&null!=this.registerForm.get("employeeName").value?"2":""!=this.registerForm.get("code").value&&null!=this.registerForm.get("code").value?"1":"3";this.currentSearchType=r,this.currentText=n,this.loadEmployeesPage(1,10,r,n)}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(b.n),e.rXU(u.ok),e.rXU(D.I))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-employee"]],viewQuery:function(r,c){if(1&r&&e.GBs(F.iy,5),2&r){let h;e.mGM(h=e.lsd())&&(c.paginator=h.first)}},decls:31,vars:9,consts:[[1,"position-relative"],[1,"position-absolute",2,"left","10px","top","10px","z-index","10"],["title","\u062a\u062c\u062f\u064a\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0646\u0627\u062a","mat-button","","type","button",1,"close","mat-button",3,"click"],[1,"material-icons","text-primary"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",3,"formGroup"],[1,"row"],[1,"col-md-2"],["formArrayName","employeeName","formControlNameSpecificAccessAttribute","name",3,"fetchData","data","displayKey","pageSize","placeholder"],["type","text","required","","formControlName","code","id","employeeCode",1,"form-control"],[1,"col-md-3"],["type","text","required","","formControlName","phoneNumber","id","phoneNumber",1,"form-control"],[1,"col-md-3","align-self-end"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"feather","icon-info"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 ","blockClass","table-border-style",3,"options"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","employeeCode"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","positionCode"],["matColumnDef","name"],["matColumnDef","nameEn"],["matColumnDef","phoneNumber"],["matColumnDef","financialNumber"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","routerLink","/EmployeeDetails",3,"queryParams",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","routerLink","/EmployeeDetails",3,"queryParams"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,c){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"a",2),e.bIt("click",function(){return c.onReset()}),e.j41(3,"i",3),e.EFF(4,"refresh"),e.k0s()()(),e.nrm(5,"app-loading")(6,"app-messages"),e.j41(7,"div",4)(8,"div",5)(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9),e.nrm(13,"app-dynamic-dropdown",10),e.k0s(),e.j41(14,"div",9)(15,"label"),e.EFF(16,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(17,"input",11),e.k0s(),e.j41(18,"div",12)(19,"label"),e.EFF(20,"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(21,"input",13),e.k0s(),e.j41(22,"div",14)(23,"button",15),e.bIt("click",function(){return c.onSearch()}),e.EFF(24," \u0628\u062d\u062b "),e.nrm(25,"i",16),e.k0s()()()(),e.nrm(26,"br"),e.k0s()()(),e.j41(27,"div",17)(28,"app-card",18),e.DNE(29,E,2,0,"p",19)(30,U,26,8,"div",20),e.k0s()()()),2&r&&(e.R7$(10),e.Y8G("formGroup",c.registerForm),e.R7$(3),e.Y8G("fetchData",c.loadEmployees.bind(c))("data",c.employeeFacade.employeeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.R7$(15),e.Y8G("options",!1),e.R7$(),e.Y8G("ngIf",0==c.dataSource.data.length),e.R7$(),e.Y8G("ngIf",0!=c.dataSource.data.length))},dependencies:[o.bT,g.Wk,u.qT,u.me,u.BC,u.cb,u.YS,u.j4,u.JD,u.v8,j.q,d.y,_.m,i.An,F.iy,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,m.i,l.It,l.iY]})}return t})(),data:{breadcrumb:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}}];let Q=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.$C({type:t});static#o=this.\u0275inj=e.G2t({imports:[g.iI.forChild(J),g.iI]})}return t})();var W=a(5842),H=a(7591),Z=a(2102),q=a(9631),ee=a(9183),te=a(6600),oe=a(2798);let ne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.$C({type:t});static#o=this.\u0275inj=e.G2t({providers:[b.n,W.v],imports:[o.MD,Q,u.X1,H.G,Z.RG,m.i,l.Hl,q.fS,ee.D6,te.Sy,oe.Ve]})}return t})()},6661:(S,y,a)=>{a.d(y,{m:()=>j});var o=a(3953),g=a(9417),u=a(1413),v=a(152),p=a(177);const F=["dropdownMenu"];function e(d,_){if(1&d){const i=o.RV6();o.j41(0,"li")(1,"a",8),o.bIt("mousedown",function(){const l=o.eBV(i).$implicit,f=o.XpG();return o.Njj(f.onSelectionChange(l))}),o.EFF(2),o.k0s()()}if(2&d){const i=_.$implicit,m=o.XpG();o.R7$(2),o.SpI(" ",i[m.displayKey]," ")}}function b(d,_){1&d&&(o.j41(0,"li",9)(1,"div",10)(2,"span",11),o.EFF(3,"Loading..."),o.k0s()()())}function D(d,_){1&d&&(o.j41(0,"li",12)(1,"small"),o.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),o.k0s()())}let j=(()=>{class d{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new o.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new u.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,v.B)(500)).subscribe(i=>{this.searchQuery=i,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,i)})}ngOnChanges(i){i.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(i=>{this.items=1===this.currentPage?i.items:[...this.items,...i.items],this.totalCount=i.totalCount,this.loading=!1})}onScroll(i){const m=i.target;m.scrollTop+m.clientHeight+5>=m.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(i){this.onChange(this.formControlNameSpecificAccessAttribute?i[this.formControlNameSpecificAccessAttribute]:i),this.selectedOption=i,this.optionSelected.emit(i),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const i=this.dropdownMenu.nativeElement;i.style.display="block"===i.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(i){this.searchSubject.next(i)}writeValue(i){this.selectedOption=i}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.isDisabled=i}static#e=this.\u0275fac=function(m){return new(m||d)};static#t=this.\u0275cmp=o.VBU({type:d,selectors:[["app-dynamic-dropdown"]],viewQuery:function(m,l){if(1&m&&o.GBs(F,5),2&m){let f;o.mGM(f=o.lsd())&&(l.dropdownMenu=f.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[o.Jv_([{provide:g.kq,useExisting:(0,o.Rfq)(()=>d),multi:!0}]),o.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(m,l){if(1&m){const f=o.RV6();o.j41(0,"div",2,0)(2,"label"),o.EFF(3),o.k0s(),o.j41(4,"input",3),o.bIt("blur",function(){return o.eBV(f),o.Njj(l.closeDropdown())})("click",function(){return o.eBV(f),o.Njj(l.toggleDropdown())})("input",function(E){return o.eBV(f),o.Njj(l.onSearch(E.target.value))}),o.k0s(),o.j41(5,"ul",4,1),o.bIt("scroll",function(E){return o.eBV(f),o.Njj(l.onScroll(E))}),o.DNE(7,e,3,1,"li",5)(8,b,4,0,"li",6)(9,D,3,0,"li",7),o.k0s()()}2&m&&(o.R7$(3),o.JRh(l.placeholder),o.R7$(),o.FS9("placeholder",l.placeholder),o.Y8G("value",l.selectedOption?l.selectedOption[l.displayKey]:"")("disabled",l.isDisabled)("ngClass",l.ngClass),o.R7$(3),o.Y8G("ngForOf",l.items),o.R7$(),o.Y8G("ngIf",l.loading),o.R7$(),o.Y8G("ngIf",0===l.items.length&&!l.loading))},dependencies:[p.YU,p.Sq,p.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return d})()},2802:(S,y,a)=>{a.d(y,{A:()=>g});const g={currentPage:0,items:[],pageSize:0,totalCount:0,totalPages:0}}}]);