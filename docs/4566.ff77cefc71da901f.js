"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[4566],{4566:(w,d,o)=>{o.r(d),o.d(d,{PermissionModule:()=>U});var u=o(177),p=o(8498),c=o(9417),h=o(3471),f=o(6695),l=o(9159),t=o(3953),_=o(643),b=o(3197),v=o(2016),F=o(2702),C=o(9213),g=o(9947),m=o(8834);const P=()=>[5,10,20];function G(s,r){1&s&&(t.j41(0,"p"),t.EFF(1," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"),t.k0s())}function I(s,r){1&s&&(t.j41(0,"th",31),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),t.k0s())}function j(s,r){if(1&s&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&s){const e=r.$implicit;t.R7$(),t.JRh(e.name)}}function k(s,r){1&s&&(t.j41(0,"th",31),t.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.k0s())}function R(s,r){if(1&s){const e=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.onEdit(n))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()}}function y(s,r){if(1&s){const e=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.onDelete(n.id))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s()()}}function x(s,r){if(1&s&&(t.j41(0,"td",32),t.DNE(1,R,3,0,"button",33)(2,y,3,0,"button",34),t.k0s()),2&s){const e=t.XpG(3);t.R7$(),t.Y8G("ngIf",e.sharedFacade.hasPermission("UpdateGroup")),t.R7$(),t.Y8G("ngIf",e.sharedFacade.hasPermission("DeleteGroup"))}}function D(s,r){1&s&&t.nrm(0,"tr",37)}function $(s,r){1&s&&t.nrm(0,"tr",38)}function A(s,r){if(1&s){const e=t.RV6();t.j41(0,"div",17)(1,"table",23),t.qex(2,24),t.DNE(3,I,2,0,"th",25)(4,j,2,1,"td",26),t.bVm(),t.qex(5,27),t.DNE(6,k,2,0,"th",25)(7,x,3,2,"td",26),t.bVm(),t.DNE(8,D,1,0,"tr",28)(9,$,1,0,"tr",29),t.k0s(),t.j41(10,"mat-paginator",30),t.bIt("page",function(n){t.eBV(e);const a=t.XpG(2);return t.Njj(a.onPageChange(n))}),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("pageIndex",e.currentPage)("length",e.totalCount)("pageSize",e.pageSize)("pageSizeOptions",t.lJ4(7,P))}}function E(s,r){if(1&s&&(t.j41(0,"div",19)(1,"app-card",20),t.DNE(2,G,2,0,"p",21)(3,A,11,8,"div",22),t.k0s()()),2&s){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",0==e.dataSource.data.length),t.R7$(),t.Y8G("ngIf",0!=e.dataSource.data.length)}}function T(s,r){if(1&s){const e=t.RV6();t.j41(0,"td")(1,"input",44),t.bIt("change",function(n){const a=t.eBV(e).$implicit,J=t.XpG(3);return t.Njj(J.onCheckboxChange(n,a.id))}),t.k0s(),t.j41(2,"label",45),t.EFF(3),t.k0s()()}if(2&s){const e=r.$implicit,i=t.XpG(3);t.R7$(),t.Y8G("checked",i.isSelected(e.id)),t.R7$(2),t.JRh(e.name)}}function S(s,r){if(1&s&&(t.j41(0,"tbody")(1,"tr")(2,"td"),t.EFF(3),t.k0s(),t.DNE(4,T,4,2,"td",43),t.k0s()()),2&s){const e=r.$implicit,i=t.XpG().ngIf;t.R7$(2),t.BMQ("rowspan",i[e].length),t.R7$(),t.JRh(e),t.R7$(),t.Y8G("ngForOf",i[e])}}function V(s,r){if(1&s){const e=t.RV6();t.j41(0,"table",39)(1,"thead")(2,"th")(3,"div",40)(4,"input",41),t.bIt("change",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.onSelectAll(n))}),t.k0s(),t.j41(5,"label",42),t.EFF(6,"\u0627\u0644\u0643\u0644"),t.k0s()()(),t.j41(7,"tr")(8,"th"),t.EFF(9,"\u0627\u0633\u0645 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"),t.k0s(),t.j41(10,"th"),t.EFF(11,"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"),t.k0s()()(),t.DNE(12,S,5,3,"tbody",43),t.k0s()}if(2&s){const e=r.ngIf,i=t.XpG();t.R7$(12),t.Y8G("ngForOf",i.Object.keys(e))}}const Y=[{path:"",component:(()=>{class s{constructor(e,i,n,a){this.fb=e,this.permissionFacade=i,this.sharedFacade=n,this.cdr=a,this.edit=!1,this.selectedPermissionIds=[],this.registerForm=this.fb.group({id:[""],name:["",c.k0.required],permissions:[this.selectedPermissionIds,c.k0.required]}),this.permissionsData={},this.displayedColumns=["name","actions"],this.dataSource=new l.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0,this.Object=Object}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadAllGroups(this.currentPage+1,this.pageSize)}loadAllGroups(e,i,n){this.permissionFacade.GetAllGroup(e,i)}ngOnInit(){this.dataSource.paginator=this.paginator,this.loadAllGroups(1,10),this.registerForm.controls.id.setValue(""),this.permissionFacade.GetAllPermission(),this.permissionFacade.AllGroupSubject$.subscribe(e=>{this.dataSource.data=e.items,this.totalCount=e.totalCount}),this.edit=!1,this.subscription=this.permissionFacade.permission$.subscribe(e=>{this.permissionsData=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onDelete(e){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0633\u062d\u061f")&&(this.edit=!1,this.selectedPermissionIds=[],this.permissionFacade.deleteGroup(e),this.registerForm.reset())}onReset(){this.edit=!1,this.selectedPermissionIds=[],this.registerForm.reset(),this.registerForm.setErrors(null)}onAdd(){if(0!=this.registerForm.value.permissions?.length&&0!=this.selectedPermissionIds.length)return this.registerForm.valid?this.edit?(this.permissionFacade.UpdateGroup(this.registerForm?.value),void this.onReset()):(this.permissionFacade.AddGroup(this.registerForm?.value),void this.onReset()):void this.sharedFacade.showMessage(h.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629",[""]);this.sharedFacade.showMessage(h.Go.warning,"\u0627\u0636\u0627\u0641\u0629 \u0645\u062c\u0645\u0648\u0639\u0629",["\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0645\u062c\u0645\u0648\u0639\u0629"])}isSelected(e){return this.selectedPermissionIds.includes(e)}onCheckboxChange(e,i){if(e.target.checked)this.selectedPermissionIds.push(i);else{const n=this.selectedPermissionIds.indexOf(i);-1!==n&&this.selectedPermissionIds.splice(n,1)}this.registerForm.controls.permissions.setValue(this.selectedPermissionIds)}onSelectAll(e){if(e.target.checked){const i=Object.values(this.permissionsData).flat().map(n=>n.id);this.selectedPermissionIds=i}else this.selectedPermissionIds=[];this.registerForm.controls.permissions.setValue(this.selectedPermissionIds)}onEdit(e){this.selectedPermissionIds=[],Object.keys(e.permissions).forEach(i=>{e.permissions[i].forEach(n=>{this.selectedPermissionIds.push(n.id)})}),this.registerForm.patchValue(e),this.registerForm.controls.permissions.setValue(this.selectedPermissionIds),this.edit=!0}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(c.ok),t.rXU(_.y),t.rXU(b.I),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-evaluations-types"]],viewQuery:function(i,n){if(1&i&&t.GBs(f.iy,5),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first)}},decls:26,vars:8,consts:[[1,"position-relative"],[1,"position-absolute",2,"left","10px","top","10px","z-index","10"],["title","\u062a\u062c\u062f\u064a\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0646\u0627\u062a","mat-button","","type","button",1,"close","mat-button",3,"click"],[1,"material-icons","text-primary"],[1,"col-sm-12"],["cardTitle","\u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0627\u062a",1,"",3,"options"],[1,"row"],[1,"col-md-5"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-7"],["for","inlineFormInputName"],["type","text","required","","formControlName","name","id","inlineFormInputName",1,"form-control"],[1,"col-12","align-self-end"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["class","col-md-7",4,"ngIf"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","cardClass","Recent-Users","blockClass","p-0"],[1,"table-responsive"],["class","table table-hover mb-0",4,"ngIf"],[1,"col-md-7"],["cardTitle","\u0639\u0631\u0636 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0627\u062a","cardClass","Recent-Users ","blockClass","p-0"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"table","table-hover","mb-0"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change"],[1,"form-check-label","px-0"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"form-check-label","px-2"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"a",2),t.bIt("click",function(){return n.onReset()}),t.j41(3,"i",3),t.EFF(4,"refresh"),t.k0s()()(),t.nrm(5,"app-loading")(6,"app-messages"),t.j41(7,"div",4)(8,"app-card",5)(9,"div",6)(10,"div",7)(11,"form",8)(12,"div",9)(13,"label",10),t.EFF(14,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),t.k0s(),t.nrm(15,"input",11),t.k0s(),t.j41(16,"div",12)(17,"button",13),t.bIt("click",function(){return n.onAdd()}),t.EFF(18,"\u062d\u0641\u0638"),t.k0s()()()(),t.DNE(19,E,4,2,"div",14),t.nI1(20,"async"),t.k0s()()(),t.j41(21,"div",15)(22,"app-card",16)(23,"div",17),t.DNE(24,V,13,1,"table",18),t.nI1(25,"async"),t.k0s()()()()),2&i&&(t.R7$(8),t.Y8G("options",!1),t.R7$(3),t.Y8G("formGroup",n.registerForm),t.R7$(8),t.Y8G("ngIf",t.bMT(20,4,n.permissionFacade.AllGroupSubject$)),t.R7$(5),t.Y8G("ngIf",t.bMT(25,6,n.permissionFacade.permission$)))},dependencies:[u.Sq,u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.j4,c.JD,v.q,F.y,C.An,f.iy,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,g.i,m.It,m.iY,u.Jj]})}return s})(),data:{breadcrumb:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}}];let N=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[p.iI.forChild(Y),p.iI]})}return s})();var X=o(6401),O=o(7591),z=o(2102),B=o(4823),M=o(2765);let U=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({providers:[_.y,X.g],imports:[u.MD,N,c.X1,O.G,z.RG,B.uc,M.g7,g.i,m.Hl]})}return s})()}}]);