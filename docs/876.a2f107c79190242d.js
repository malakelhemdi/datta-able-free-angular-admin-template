"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[876],{9463:(D,F,i)=>{i.r(F),i.d(F,{EmployeeBonusesModule:()=>ee});var s=i(177),E=i(8834),j=i(2102),S=i(9631),b=i(4823),r=i(9417),e=i(3953),$=i(1626),A=i(1441);let _=(()=>{class o{constructor(t,n){this.http=t,this.appConfig=n,this.url=this.appConfig.defaultUrl}AddEmployeeBonuses(t){return this.http.post(`${this.url}/api/Employee/AddBonusEmployee?culture=ar-LY`,t)}CancelEmployeeBonuses(t){return this.http.delete(`${this.url}/api/Employee/CancelBonusEmployee?culture=ar-LY`,{body:t})}GetEmployeeBonuses(t,n,u,h){return this.http.get(`${this.url}/api/Employee/GetBonusEmployee?culture=ar-LY'`,{params:{Page:t,PageSize:n,SearchType:u,Value:h}})}GetBonusesTypes(t){return this.http.get(`${this.url}/api/BonusTypes/GetBonusTypes?IsActive=${t}&culture=ar-LY`)}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO($.Qq),e.KVO(A.o))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}return o})();var p=i(9183),B=i(7591),l=i(4412),m=i(6496),c=i(8141),a=i(3471),g=i(3197);let f=(()=>{class o{constructor(t,n){this.sharedFacade=t,this.employeeBonusesServices=n,this.EmployeeBonusesSubject$=new l.t(null),this.EmployeeBonuses$=this.EmployeeBonusesSubject$.asObservable(),this.BonusesTypeSubject$=new l.t([]),this.BonusesType$=this.BonusesTypeSubject$.asObservable()}cancelEmployeeBonuses(t){const n=this.employeeBonusesServices.CancelEmployeeBonuses(t).pipe((0,c.M)(u=>{u.type==a.yl.Success?(this.sharedFacade.showMessage(a.Go.success,"\u062a\u0645 \u0627\u0644\u063a\u0627\u0621 ",["\u062a\u0645 \u0627\u0644\u063a\u0627\u0621 \u0628\u0646\u062c\u0627\u062d"]),this.EmployeeBonusesSubject$.next(null)):this.sharedFacade.showMessage(a.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u063a\u0627\u0621",u.messages)}),(0,m.t)());this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe()}GetEmployeeBonuses(t,n){const u=this.employeeBonusesServices.GetEmployeeBonuses(1,1,t,n).pipe((0,c.M)(h=>{h.type==a.yl.Success?this.EmployeeBonusesSubject$.next(h.content.items[0]):(this.EmployeeBonusesSubject$.next(null),this.sharedFacade.showMessage(a.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0639\u0644\u0627\u0648\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",h.messages))}),(0,m.t)());this.sharedFacade.showLoaderUntilCompleted(u).pipe().subscribe()}AddEmployeeBonuses(t){const n=this.employeeBonusesServices.AddEmployeeBonuses(t).pipe((0,c.M)(u=>{u.type==a.yl.Success?this.sharedFacade.showMessage(a.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",u.messages):this.sharedFacade.showMessage(a.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",u.messages)}),(0,m.t)());this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe()}GetBonusesType(){const t=this.employeeBonusesServices.GetBonusesTypes(1).pipe((0,c.M)(n=>{n.type==a.yl.Success?this.BonusesTypeSubject$.next(n.content):(this.BonusesTypeSubject$.next([]),this.sharedFacade.showMessage(a.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0627\u0644\u0639\u0644\u0627\u0648\u0627\u062a",n.messages))}),(0,m.t)());this.sharedFacade.showLoaderUntilCompleted(t).pipe().subscribe()}resetEmployeeBonuses(){this.EmployeeBonusesSubject$.next(null),this.EmployeeBonusesSubject$.subscribe(null)}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(g.I),e.KVO(_))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}return o})();var T=i(8498),G=i(2356),I=i(2016),R=i(2702),M=i(6661),k=i(3391);function w(o,d){if(1&o&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&o){const t=d.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function N(o,d){if(1&o){const t=e.RV6();e.j41(0,"div",26)(1,"button",27),e.bIt("click",function(){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onAdd())}),e.EFF(2,"\u062d\u0641\u0638"),e.k0s(),e.j41(3,"button",28),e.bIt("click",function(){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onReset())}),e.EFF(4,"\u062c\u062f\u064a\u062f"),e.k0s()()}}function O(o,d){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4)(4,"div",0)(5,"div",15)(6,"label"),e.EFF(7,"\u0627\u0644\u0645\u0631\u062a\u0628 \u0627\u0644\u0627\u0633\u0627\u0633\u064a"),e.k0s(),e.nrm(8,"input",16),e.nI1(9,"async"),e.k0s(),e.j41(10,"div",15)(11,"label"),e.EFF(12,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0631\u062a\u0628"),e.k0s(),e.nrm(13,"input",16),e.nI1(14,"async"),e.k0s(),e.j41(15,"div",15)(16,"label"),e.EFF(17,"\u0646\u0648\u0639 \u0627\u0644\u0639\u0644\u0627\u0648\u0627\u0629"),e.k0s(),e.j41(18,"select",17)(19,"option",18),e.EFF(20,"\u0627\u062e\u062a\u0631 ..."),e.k0s(),e.DNE(21,w,2,2,"option",19),e.nI1(22,"async"),e.k0s()(),e.j41(23,"div",15)(24,"label",20),e.EFF(25,"\u0627\u0644\u0642\u064a\u0645\u0629"),e.k0s(),e.nrm(26,"input",21),e.k0s()(),e.j41(27,"div",0)(28,"div",15)(29,"label"),e.EFF(30,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u064a\u0647\u0627"),e.k0s(),e.nrm(31,"input",22),e.k0s(),e.j41(32,"div",15)(33,"label"),e.EFF(34,"\u062a\u0627\u0631\u064a\u062e \u0625\u0646\u062a\u0647\u0627\u0621"),e.k0s(),e.nrm(35,"input",23),e.k0s()(),e.DNE(36,N,5,0,"div",24),e.nI1(37,"async"),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("formGroup",t.registerForm),e.R7$(5),e.Y8G("value",e.bMT(9,5,t.employeeBonusesFacade.EmployeeBonuses$).basicSalary),e.R7$(5),e.Y8G("value",e.bMT(14,7,t.employeeBonusesFacade.EmployeeBonuses$).grossSalary),e.R7$(8),e.Y8G("ngForOf",e.bMT(22,9,t.employeeBonusesFacade.BonusesType$)),e.R7$(15),e.Y8G("ngIf",null!=e.bMT(37,11,t.employeeBonusesFacade.EmployeeBonuses$))}}function x(o,d){1&o&&(e.j41(0,"div",31)(1,"h5"),e.EFF(2,"\u0639\u0644\u0627\u0648\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u064a\u0629"),e.k0s()())}function P(o,d){1&o&&(e.j41(0,"h5"),e.EFF(1,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0639\u0644\u0627\u0648\u0627\u062a \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function V(o,d){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td",43)(12,"button",44),e.bIt("click",function(){const u=e.eBV(t).$implicit,h=e.XpG(3);return e.Njj(h.onCancel(u.id))}),e.nrm(13,"i",45),e.k0s()()()}if(2&o){const t=d.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.amount),e.R7$(2),e.JRh(e.bMT(7,4,t.dateOfGet)),e.R7$(3),e.JRh(e.bMT(10,6,t.expiryDate))}}function Y(o,d){if(1&o&&(e.j41(0,"table",41)(1,"thead")(2,"th"),e.EFF(3,"\u0627\u0633\u0645 \u0627\u0644\u0639\u0644\u0627\u0648\u0629"),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u0627\u0644\u0642\u064a\u0645\u0629"),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u064a\u0647\u0627"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u062a\u0627\u0631\u064a\u062e \u0625\u0646\u062a\u0647\u0627\u0621"),e.k0s(),e.nrm(10,"th"),e.k0s(),e.j41(11,"tbody"),e.DNE(12,V,14,8,"tr",42),e.nI1(13,"async"),e.k0s()()),2&o){let t;const n=e.XpG(2);e.R7$(12),e.Y8G("ngForOf",null==(t=e.bMT(13,1,n.employeeBonusesFacade.EmployeeBonuses$))?null:t.bonus)}}function U(o,d){1&o&&(e.j41(0,"div",31)(1,"h5"),e.EFF(2,"\u0633\u062c\u0644 \u0639\u0644\u0627\u0648\u0627\u062a"),e.k0s()())}function X(o,d){1&o&&(e.j41(0,"h5"),e.EFF(1,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u062c\u0644 \u0639\u0644\u0627\u0648\u0627\u062a \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function L(o,d){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"date"),e.k0s()()),2&o){const t=d.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.amount),e.R7$(2),e.JRh(1==t.isActive?"\u0645\u062a\u062d\u0635\u0644 \u0639\u0644\u064a\u0647\u0627":2==t.isActive?"\u063a\u064a\u0631 \u0645\u062a\u0627\u062d\u0629":"\u0645\u0644\u063a\u064a\u0629"),e.R7$(2),e.JRh(e.bMT(9,6,t.dateOfGet)),e.R7$(3),e.JRh(e.bMT(12,8,t.expiryDate)),e.R7$(3),e.JRh(3!=t.isActive?"":e.bMT(15,10,t.deleteDate))}}function K(o,d){if(1&o&&(e.j41(0,"table",41)(1,"thead")(2,"th"),e.EFF(3,"\u0627\u0633\u0645 \u0627\u0644\u0639\u0644\u0627\u0648\u0629"),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u0627\u0644\u0642\u064a\u0645\u0629"),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u062d\u0627\u0644\u062a\u0647\u0627"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u064a\u0647\u0627"),e.k0s(),e.j41(10,"th"),e.EFF(11,"\u062a\u0627\u0631\u064a\u062e \u0625\u0646\u062a\u0647\u0627\u0621"),e.k0s(),e.j41(12,"th"),e.EFF(13,"\u062a\u0627\u0631\u064a\u062e \u0625\u0644\u063a\u0627\u0621\u0647\u0627"),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,L,16,12,"tr",42),e.nI1(16,"async"),e.k0s()()),2&o){let t;const n=e.XpG(2);e.R7$(15),e.Y8G("ngForOf",null==(t=e.bMT(16,1,n.employeeBonusesFacade.EmployeeBonuses$))?null:t.bonusHistory)}}function J(o,d){if(1&o){const t=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"a",32),e.bIt("click",function(){e.eBV(t);const u=e.XpG();return e.Njj(u.multiCollapsed1=!u.multiCollapsed1)}),e.EFF(4," \u0639\u0644\u0627\u0648\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u064a\u0629 "),e.k0s(),e.j41(5,"button",33),e.bIt("click",function(){e.eBV(t);const u=e.XpG();return e.Njj(u.multiCollapsed2=!u.multiCollapsed2)}),e.EFF(6," \u0633\u062c\u0644 \u0639\u0644\u0627\u0648\u0627\u062a "),e.k0s()()(),e.j41(7,"div",0)(8,"div",34)(9,"div",35)(10,"div",2),e.DNE(11,x,3,0,"div",36),e.nI1(12,"async"),e.j41(13,"div",3),e.DNE(14,P,2,0,"h5",37),e.nI1(15,"async"),e.j41(16,"div",38),e.DNE(17,Y,14,3,"table",39),e.nI1(18,"async"),e.k0s()()()()(),e.j41(19,"div",34)(20,"div",40)(21,"div",2),e.DNE(22,U,3,0,"div",36),e.nI1(23,"async"),e.j41(24,"div",3),e.DNE(25,X,2,0,"h5",37),e.nI1(26,"async"),e.j41(27,"div",38),e.DNE(28,K,17,3,"table",39),e.nI1(29,"async"),e.k0s()()()()()()()}if(2&o){let t,n,u,h,v,C;const y=e.XpG();e.R7$(3),e.BMQ("aria-expanded",!y.multiCollapsed1),e.R7$(2),e.BMQ("aria-expanded",!y.multiCollapsed2),e.R7$(4),e.Y8G("ngbCollapse",y.multiCollapsed1),e.R7$(2),e.Y8G("ngIf",0!=(null==(t=e.bMT(12,10,y.employeeBonusesFacade.EmployeeBonuses$))?null:t.bonus.length)),e.R7$(3),e.Y8G("ngIf",0==(null==(n=e.bMT(15,12,y.employeeBonusesFacade.EmployeeBonuses$))?null:n.bonus.length)),e.R7$(3),e.Y8G("ngIf",0!=(null==(u=e.bMT(18,14,y.employeeBonusesFacade.EmployeeBonuses$))?null:u.bonus.length)),e.R7$(3),e.Y8G("ngbCollapse",y.multiCollapsed2),e.R7$(2),e.Y8G("ngIf",0!=(null==(h=e.bMT(23,16,y.employeeBonusesFacade.EmployeeBonuses$))?null:h.bonusHistory.length)),e.R7$(3),e.Y8G("ngIf",0==(null==(v=e.bMT(26,18,y.employeeBonusesFacade.EmployeeBonuses$))?null:v.bonusHistory.length)),e.R7$(3),e.Y8G("ngIf",0!=(null==(C=e.bMT(29,20,y.employeeBonusesFacade.EmployeeBonuses$))?null:C.bonusHistory.length))}}const H=[{path:"",component:(()=>{class o{constructor(t,n,u,h,v){this.fb=t,this.employeeBonusesFacade=n,this.sharedFacade=u,this.employeeFacade=h,this.cdr=v,this.rest=!1,this.isCollapsed=!0,this.multiCollapsed1=!1,this.multiCollapsed2=!1,this.phoneNumberPattern="[0][9]{1}[1,2,4,3,5]{1}[0-9]{7}",this.patternFloat="^-?\\d*(\\.\\d+)?$",this.registerForm=this.fb.group({id:["",r.k0.required],employeeId:[""],dateOfGet:["",r.k0.required],amount:[0,[r.k0.required,r.k0.pattern(this.patternFloat)]],expiryDate:[""],basicSalary:[{value:"",disabled:!0}],grossSalary:[{value:"",disabled:!0}]}),this.registerFormSearch=this.fb.group({value:["",r.k0.required],code:[""],phoneNumber:["",[r.k0.minLength(10),r.k0.maxLength(10),r.k0.pattern(this.phoneNumberPattern)]],employee:[null]}),this.loadEmployees=(C,y,se)=>{this.employeeFacade.GetEmployee(C,y)},this.onSubmit()}onEmployeeSelect(t){this.registerFormSearch.controls.employee.setValue(t)}ngOnInit(){this.onSubmit(),this.rest=!1,this.loadEmployees(1,10)}onSubmit(){this.employeeBonusesFacade.EmployeeBonuses$.subscribe(null),this.registerForm.controls.id.setValue(""),this.employeeBonusesFacade.GetBonusesType()}onchange(){this.rest=!1}onCancel(t){let n={employeeId:this.employeeBonusesFacade.EmployeeBonusesSubject$.getValue().id,id:t,deleteDate:(new Date).toISOString()};this.employeeBonusesFacade.cancelEmployeeBonuses(n),this.rest=!1,this.onClean()}onReset(){this.registerForm.reset(),this.registerForm.setErrors(null),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.employeeBonusesFacade.EmployeeBonusesSubject$.next(null),this.employeeBonusesFacade.EmployeeBonuses$.subscribe(null)}onClean(){this.registerForm.reset(),this.registerForm.setErrors(null),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.employeeBonusesFacade.EmployeeBonusesSubject$.next(null),this.employeeBonusesFacade.EmployeeBonuses$.subscribe(null)}onAdd(){const t=this.employeeBonusesFacade.EmployeeBonusesSubject$.getValue();if(null!=t&&this.registerForm.controls.employeeId.setValue(t.id),this.registerForm.valid)this.employeeBonusesFacade.AddEmployeeBonuses(this.registerForm?.value),this.onClean(),this.rest=!1;else{if(""==this.registerForm.value.id||null==this.registerForm.value.id||this.registerForm.controls.id.invalid)return void this.sharedFacade.showMessage(a.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0639\u0644\u0627\u0648\u0627\u0629    ",[""]);if(0==this.registerForm.value.amount||null==this.registerForm.value.amount||this.registerForm.controls.amount.invalid)return void this.sharedFacade.showMessage(a.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0642\u064a\u0645\u0629 \u0627\u0644\u0639\u0644\u0627\u0648\u0627\u0629 \u0648\u0628\u0635\u064a\u063a\u0629 \u0635\u062d\u064a\u062d\u0629 ",[""]);if(""==this.registerForm.value.dateOfGet||null==this.registerForm.value.dateOfGet||this.registerForm.controls.dateOfGet.invalid)return void this.sharedFacade.showMessage(a.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u064a \u0627\u0644\u0639\u0644\u0627\u0648\u0627\u0629",[""])}}onSearch(){if(!(""!=this.registerFormSearch.value.code&&null!=this.registerFormSearch.value.code||""!=this.registerFormSearch.value.employee.name&&null!=this.registerFormSearch.value.employee||""!=this.registerFormSearch.value.phoneNumber&&null!=this.registerFormSearch.value.phoneNumber))return void this.sharedFacade.showMessage(a.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0628\u062d\u062b   ",[""]);if(this.registerFormSearch.controls.phoneNumber.invalid&&""!=this.registerFormSearch.value.phoneNumber&&null!=this.registerFormSearch.value.phoneNumber)return void this.sharedFacade.showMessage(a.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644  \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0635\u064a\u063a\u0629 \u0635\u062d\u064a\u062d\u0629  ",[""]);const t=this.registerFormSearch.value?.employee&&""!=this.registerFormSearch.value.employee.name&&null!=this.registerFormSearch.value.employee.name?this.registerFormSearch.value.employee.name:""!=this.registerFormSearch.value.code&&null!=this.registerFormSearch.value.code?this.registerFormSearch.value.code:this.registerFormSearch.value.phoneNumber;this.employeeBonusesFacade.GetEmployeeBonuses(this.registerFormSearch.value?.employee&&""!=this.registerFormSearch.value.employee.name&&null!=this.registerFormSearch.value.employee.name?"2":""!=this.registerFormSearch.value.code&&null!=this.registerFormSearch.value.code?"1":"3",t),this.cdr.detectChanges(),this.rest=!0;const u=this.employeeBonusesFacade.EmployeeBonusesSubject$.getValue();null!=u&&this.registerForm.controls.employeeId.setValue(u.id),this.cdr.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok),e.rXU(f),e.rXU(g.I),e.rXU(G.n),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-rewards-types"]],decls:26,vars:12,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-md-2"],[3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["type","text","required","","formControlName","code","id","employeeCode",1,"form-control"],[1,"col-md-3"],["type","text","required","","formControlName","phoneNumber","id","phoneNumber",1,"form-control"],[1,"col-md-3","align-self-end"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"feather","icon-info"],["class","col-sm-12",4,"ngIf"],["class","col-sm-12 mb-3",4,"ngIf"],[1,"form-group","col-md-3"],["disabled","","type","text",1,"form-control",3,"value"],["formControlName","id","required","","aria-label","select example",1,"form-select"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","inlineFormInputName"],["type","text","required","","formControlName","amount","id","inlineFormInputName",1,"form-control"],["type","date","formControlName","dateOfGet","id","approvalDate",1,"form-control"],["type","date","formControlName","expiryDate","id","inlineFormexpiryDate",1,"form-control"],["class","col-12",4,"ngIf"],[3,"value"],[1,"col-12"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"],[1,"col-sm-12","mb-3"],[1,"card","mb-0"],[1,"card-header"],["aria-controls","multiCollapseExample1",1,"btn","btn-primary","text-white","me-2","mb-2",3,"click"],["type","button","aria-controls","multiCollapseExample2",1,"btn","btn-primary","me-2","mb-2",3,"click"],[1,"col-sm-6"],["id","multiCollapseExample1",1,"multi-collapse","mt-2",3,"ngbCollapse"],["class","card-header",4,"ngIf"],[4,"ngIf"],[1,"table-responsive"],["class","table table-striped table-hover",4,"ngIf"],["id","multiCollapseExample2",1,"multi-collapse","mt-2",3,"ngbCollapse"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"td-actions"],["type","button",1,"btn","drp-icon","btn-rounded","btn-outline-warning",3,"click"],[1,"feather","icon-slash"]],template:function(n,u){1&n&&(e.j41(0,"div",0),e.nrm(1,"app-loading")(2,"app-messages"),e.j41(3,"div",1)(4,"div",2)(5,"div",3)(6,"form",4)(7,"div",0)(8,"div",5)(9,"app-dynamic-dropdown",6),e.bIt("optionSelected",function(v){return u.onEmployeeSelect(v)}),e.k0s()(),e.j41(10,"div",5)(11,"label"),e.EFF(12,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(13,"input",7),e.k0s(),e.j41(14,"div",8)(15,"label"),e.EFF(16,"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(17,"input",9),e.k0s(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return u.onSearch()}),e.EFF(20," \u0628\u062d\u062b "),e.nrm(21,"i",12),e.k0s()()()()()()(),e.DNE(22,O,38,13,"div",13),e.nI1(23,"async"),e.DNE(24,J,30,22,"div",14),e.nI1(25,"async"),e.k0s()),2&n&&(e.R7$(6),e.Y8G("formGroup",u.registerFormSearch),e.R7$(3),e.Y8G("fetchData",u.loadEmployees.bind(u))("data",u.employeeFacade.employeeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.R7$(13),e.Y8G("ngIf",null!=e.bMT(23,8,u.employeeBonusesFacade.EmployeeBonuses$)&&u.rest),e.R7$(2),e.Y8G("ngIf",null!=e.bMT(25,10,u.employeeBonusesFacade.EmployeeBonuses$)&&u.rest))},dependencies:[s.Sq,s.bT,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.YS,r.j4,r.JD,I.q,R.y,M.m,k.$G,s.Jj,s.vh]})}return o})(),data:{breadcrumb:"\u0627\u0644\u062c\u0632\u0627\u0621\u0627\u062a"}}];let z=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#s=this.\u0275inj=e.G2t({imports:[T.iI.forChild(H),T.iI]})}return o})();var Q=i(6600),W=i(2798),Z=i(9947),q=i(5842);let ee=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#s=this.\u0275inj=e.G2t({providers:[f,_,G.n,q.v,s.TG],imports:[s.MD,E.Hl,j.RG,S.fS,b.uc,r.X1,z,p.D6,B.G,Q.Sy,W.Ve,Z.i,r.YN,r.X1,k.h_]})}return o})()},6661:(D,F,i)=>{i.d(F,{m:()=>_});var s=i(3953),E=i(9417),j=i(1413),S=i(152),b=i(177);const r=["dropdownMenu"];function e(p,B){if(1&p){const l=s.RV6();s.j41(0,"li")(1,"a",8),s.bIt("mousedown",function(){const c=s.eBV(l).$implicit,a=s.XpG();return s.Njj(a.onSelectionChange(c))}),s.EFF(2),s.k0s()()}if(2&p){const l=B.$implicit,m=s.XpG();s.R7$(2),s.SpI(" ",l[m.displayKey]," ")}}function $(p,B){1&p&&(s.j41(0,"li",9)(1,"div",10)(2,"span",11),s.EFF(3,"Loading..."),s.k0s()()())}function A(p,B){1&p&&(s.j41(0,"li",12)(1,"small"),s.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),s.k0s()())}let _=(()=>{class p{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new s.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new j.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,S.B)(500)).subscribe(l=>{this.searchQuery=l,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,l)})}ngOnChanges(l){l.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(l=>{this.items=1===this.currentPage?l.items:[...this.items,...l.items],this.totalCount=l.totalCount,this.loading=!1})}onScroll(l){const m=l.target;m.scrollTop+m.clientHeight+5>=m.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(l){this.onChange(this.formControlNameSpecificAccessAttribute?l[this.formControlNameSpecificAccessAttribute]:l),this.selectedOption=l,this.optionSelected.emit(l),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const l=this.dropdownMenu.nativeElement;l.style.display="block"===l.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(l){this.searchSubject.next(l)}writeValue(l){this.selectedOption=l}registerOnChange(l){this.onChange=l}registerOnTouched(l){this.onTouched=l}setDisabledState(l){this.isDisabled=l}static#e=this.\u0275fac=function(m){return new(m||p)};static#t=this.\u0275cmp=s.VBU({type:p,selectors:[["app-dynamic-dropdown"]],viewQuery:function(m,c){if(1&m&&s.GBs(r,5),2&m){let a;s.mGM(a=s.lsd())&&(c.dropdownMenu=a.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[s.Jv_([{provide:E.kq,useExisting:(0,s.Rfq)(()=>p),multi:!0}]),s.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(m,c){if(1&m){const a=s.RV6();s.j41(0,"div",2,0)(2,"label"),s.EFF(3),s.k0s(),s.j41(4,"input",3),s.bIt("blur",function(){return s.eBV(a),s.Njj(c.closeDropdown())})("click",function(){return s.eBV(a),s.Njj(c.toggleDropdown())})("input",function(f){return s.eBV(a),s.Njj(c.onSearch(f.target.value))}),s.k0s(),s.j41(5,"ul",4,1),s.bIt("scroll",function(f){return s.eBV(a),s.Njj(c.onScroll(f))}),s.DNE(7,e,3,1,"li",5)(8,$,4,0,"li",6)(9,A,3,0,"li",7),s.k0s()()}2&m&&(s.R7$(3),s.JRh(c.placeholder),s.R7$(),s.FS9("placeholder",c.placeholder),s.Y8G("value",c.selectedOption?c.selectedOption[c.displayKey]:"")("disabled",c.isDisabled)("ngClass",c.ngClass),s.R7$(3),s.Y8G("ngForOf",c.items),s.R7$(),s.Y8G("ngIf",c.loading),s.R7$(),s.Y8G("ngIf",0===c.items.length&&!c.loading))},dependencies:[b.YU,b.Sq,b.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return p})()},2802:(D,F,i)=>{i.d(F,{A:()=>E});const E={currentPage:0,items:[],pageSize:0,totalCount:0,totalPages:0}}}]);