"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[3794],{3794:(jt,f,s)=>{s.r(f),s.d(f,{DefinitionPositionModule:()=>bt});var d=s(177),p=s(8834),j=s(2102),S=s(9631),D=s(4823),l=s(9417),T=s(6156),h=s(8498),g=s(2208),P=s(4991),c=s(3471),u=s(9159),_=s(6695),m=s(2802),t=s(3953),v=s(4210),F=s(2298),b=s(3426),y=s(3197),N=s(2016),I=s(2702),A=s(6661),x=s(9213),C=s(9947);const k=()=>[5,10,20];function z(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",14)(1,"app-dynamic-dropdown",38),t.bIt("optionSelected",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.getAllUnitsBranchingFromSpecificUnit())}),t.k0s()()}if(2&e){const i=t.XpG(2);t.R7$(),t.Y8G("fetchData",i.loadOrganizationalUnit.bind(i))("data",i.organizationalUnitFacade.AllUnitsDepartmentSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0646\u0648\u0639 \u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629")}}function U(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",14)(1,"app-dynamic-dropdown",39),t.bIt("optionSelected",function(o){t.eBV(i);const r=t.XpG(2);return t.Njj(r.selectSpecificUnit(o))}),t.k0s()()}if(2&e){const i=t.XpG(2);t.R7$(),t.Y8G("fetchData",i.loadAllUnitsBranchingFromSpecificUnit.bind(i))("data",i.organizationalUnitFacade.AllUnitsBranchingFromSpecificUnitSubject$)("displayKey","name")("pageSize",10)("placeholder","\u064a\u062a\u0628\u0639 \u0644\u0640")}}function G(e,a){if(1&e&&(t.j41(0,"div",40)(1,"label"),t.EFF(2,"\u0645\u0631\u0643\u0632 \u0627\u0644\u062a\u0643\u0644\u0641\u0629"),t.k0s(),t.nrm(3,"input",41),t.k0s()),2&e){const i=t.XpG(2);t.R7$(3),t.Y8G("disabled",!0)("value",i.costCenter)}}function E(e,a){if(1&e&&(t.j41(0,"option",42),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.Y8G("value",i.value),t.R7$(),t.JRh(i.label)}}function $(e,a){if(1&e&&(t.j41(0,"option",42),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.Y8G("value",i.value),t.R7$(),t.JRh(i.label)}}function V(e,a){if(1&e&&(t.j41(0,"div",11)(1,"label"),t.EFF(2,"\u0645\u062f\u064a\u0631\u061f"),t.k0s(),t.j41(3,"select",43)(4,"option",44),t.EFF(5,"\u0627\u062e\u062a\u0631 ..."),t.k0s(),t.DNE(6,$,2,2,"option",24),t.k0s()()),2&e){const i=t.XpG(2);t.R7$(6),t.Y8G("ngForOf",i.optionsBooleanGeneral)}}function R(e,a){1&e&&(t.j41(0,"div",53),t.EFF(1," \u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0629. "),t.k0s())}function J(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",45)(1,"div",10)(2,"div",46)(3,"label",47),t.EFF(4,"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0629"),t.k0s(),t.nrm(5,"input",48),t.DNE(6,R,2,0,"div",49),t.k0s(),t.j41(7,"div",50)(8,"a",51),t.bIt("click",function(){const o=t.eBV(i).index,r=t.XpG(2);return t.Njj(r.removeNote(o))}),t.j41(9,"i",52),t.EFF(10,"close"),t.k0s()()()()()}if(2&e){let i;const n=a.$implicit,o=a.index,r=t.XpG(2);t.Y8G("formGroupName",o),t.R7$(3),t.Mz_("for","familyName",o,""),t.R7$(2),t.Mz_("id","familyName",o,""),t.R7$(),t.Y8G("ngIf",(null==(i=r.getControl(n,"text"))?null:i.invalid)&&((null==(i=r.getControl(n,"text"))?null:i.dirty)||(null==(i=r.getControl(n,"text"))?null:i.touched)))}}function w(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"div",11)(6,"label",12),t.EFF(7,"\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s(),t.nrm(8,"input",13),t.k0s(),t.j41(9,"div",14)(10,"app-dynamic-dropdown",15),t.bIt("optionSelected",function(o){t.eBV(i);const r=t.XpG();return t.Njj(r.onOrganizationalUnitsByLevel02elect(o))}),t.k0s()(),t.DNE(11,z,2,5,"div",16),t.nI1(12,"async"),t.DNE(13,U,2,5,"div",16),t.nI1(14,"async"),t.DNE(15,G,4,2,"div",17),t.k0s(),t.j41(16,"div",10)(17,"div",14)(18,"app-dynamic-dropdown",18),t.bIt("optionSelected",function(o){t.eBV(i);const r=t.XpG();return t.Njj(r.onLocationIdSelect(o))}),t.k0s()(),t.j41(19,"div",11)(20,"app-dynamic-dropdown",19),t.bIt("optionSelected",function(o){t.eBV(i);const r=t.XpG();return t.Njj(r.onSetJobTitle(o))}),t.k0s()(),t.j41(21,"div",14)(22,"label"),t.EFF(23,"\u0627\u0633\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0628\u0627\u0644\u0644\u063a\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629"),t.k0s(),t.nrm(24,"input",20),t.k0s(),t.j41(25,"div",14)(26,"label"),t.EFF(27,"\u0627\u0633\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0628\u0627\u0644\u0644\u063a\u0629 \u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629"),t.k0s(),t.nrm(28,"input",21),t.k0s()(),t.j41(29,"div",10)(30,"div",11)(31,"label"),t.EFF(32,"\u0646\u0648\u0639 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s(),t.j41(33,"select",22)(34,"option",23),t.EFF(35,"\u0627\u062e\u062a\u0631 ..."),t.k0s(),t.DNE(36,E,2,2,"option",24),t.k0s()(),t.j41(37,"div",14)(38,"label"),t.EFF(39,"\u062a\u0627\u0631\u064a\u062e \u0633\u0631\u064a\u0627\u0646 \u0639\u0644\u0649 \u0648\u0638\u064a\u0641\u0629"),t.k0s(),t.nrm(40,"input",25),t.k0s(),t.DNE(41,V,7,1,"div",26),t.j41(42,"div",27)(43,"label",28),t.EFF(44,"\u062e\u0627\u0631\u062c \u0627\u0644\u0645\u0644\u0627\u0643 \u0627\u0644\u0648\u0638\u064a\u0641\u064a"),t.k0s(),t.nrm(45,"input",29),t.k0s(),t.j41(46,"div",27)(47,"label",30),t.EFF(48),t.k0s(),t.j41(49,"input",31),t.bIt("change",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleCheckbox())}),t.k0s()(),t.j41(50,"div",32),t.EFF(51," \u0625\u0636\u0627\u0641\u0629 \u0645\u0644\u0627\u062d\u0638\u0629 "),t.j41(52,"button",33),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.addNote())}),t.nrm(53,"i",34),t.k0s()()(),t.j41(54,"div",35),t.DNE(55,J,11,6,"div",36),t.k0s(),t.j41(56,"button",37),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.onAdd())}),t.EFF(57,"\u062d\u0641\u0638"),t.k0s()()()()()}if(2&e){let i,n;const o=t.XpG();t.R7$(3),t.Y8G("formGroup",o.registerForm),t.R7$(7),t.Y8G("fetchData",o.loadOrganizationalUnitsLevel2.bind(o))("data",o.organizationalUnitFacade.OrganizationalUnitsByLevel2Subject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"),t.R7$(),t.Y8G("ngIf",0!=(null==(i=t.bMT(12,23,o.organizationalUnitFacade.AllUnitsDepartmentSubject$))?null:i.items.length)&&""!=o.directManager&&null!=o.directManager),t.R7$(2),t.Y8G("ngIf",0!=(null==(n=t.bMT(14,25,o.organizationalUnitFacade.AllUnitsBranchingFromSpecificUnitSubject$))?null:n.items.length)),t.R7$(2),t.Y8G("ngIf",""!=o.costCenter),t.R7$(3),t.Y8G("fetchData",o.loadLocations.bind(o))("data",o.definitionPositionFacade.locationsSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0642\u0639"),t.R7$(2),t.Y8G("fetchData",o.loadjobTitles.bind(o))("data",o.jobTitleFacade.JobTitleSubject$)("displayKey","jobCode")("pageSize",10)("placeholder","\u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.R7$(16),t.Y8G("ngForOf",o.optionsNationalityType),t.R7$(5),t.Y8G("ngIf",!o.haveAdmin),t.R7$(7),t.SpI(" ",o.isChecked?"\u0645\u062d\u062c\u0648\u0632\u0629":"\u063a\u064a\u0631 \u0645\u062d\u062c\u0648\u0632\u0629"," "),t.R7$(7),t.Y8G("ngForOf",o.Notes.controls)}}function B(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",66)(1,"input",67),t.bIt("change",function(o){t.eBV(i);const r=t.XpG(2);return t.Njj(r.filterPositions(o))}),t.k0s(),t.j41(2,"label",68),t.EFF(3,"\u0648\u0638\u0627\u0626\u0641 \u062e\u0627\u0631\u062c \u0627\u0644\u0645\u0644\u0627\u0643 \u0627\u0644\u0648\u0638\u064a\u0641\u064a \u0641\u0642\u0637"),t.k0s()()}}function Y(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"),t.k0s())}function X(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s())}function L(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(i.positionCode)}}function M(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s())}function O(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(i.jobCode)}}function K(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s())}function H(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(i.jobTitleName)}}function Q(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0627\u0644\u0645\u0648\u0642\u0639"),t.k0s())}function Z(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(i.locationName)}}function W(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"),t.k0s())}function q(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(i.organizationStructureName)}}function tt(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0646\u0648\u0639 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s())}function it(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(2==i.positionType?"\u0623\u062c\u0646\u0628\u064a":"\u0644\u064a\u0628\u064a")}}function et(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u062a\u0627\u0631\u064a\u062e \u0633\u0631\u064a\u0627\u0646 \u0639\u0644\u0649 \u0648\u0638\u064a\u0641\u0629"),t.k0s())}function ot(e,a){if(1&e&&(t.j41(0,"td",85),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const i=a.$implicit;t.R7$(),t.JRh(t.bMT(2,1,i.approvalDate))}}function nt(e,a){1&e&&(t.j41(0,"th",84),t.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.k0s())}function at(e,a){if(1&e){const i=t.RV6();t.j41(0,"button",88),t.bIt("click",function(){t.eBV(i);const o=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.onEdit(o))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()}}function st(e,a){if(1&e){const i=t.RV6();t.j41(0,"button",89),t.bIt("click",function(){t.eBV(i);const o=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.onDelete(o.id))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s()()}}function rt(e,a){if(1&e&&(t.j41(0,"td",85),t.DNE(1,at,3,0,"button",86)(2,st,3,0,"button",87),t.k0s()),2&e){const i=t.XpG(3);t.R7$(),t.Y8G("ngIf",i.sharedFacade.hasPermission("UpdatePosition")),t.R7$(),t.Y8G("ngIf",i.sharedFacade.hasPermission("DeletePosition"))}}function lt(e,a){1&e&&t.nrm(0,"tr",90)}function ut(e,a){1&e&&t.nrm(0,"tr",91)}function ct(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",69)(1,"table",70),t.qex(2,71),t.DNE(3,X,2,0,"th",72)(4,L,2,1,"td",73),t.bVm(),t.qex(5,74),t.DNE(6,M,2,0,"th",72)(7,O,2,1,"td",73),t.bVm(),t.qex(8,75),t.DNE(9,K,2,0,"th",72)(10,H,2,1,"td",73),t.bVm(),t.qex(11,76),t.DNE(12,Q,2,0,"th",72)(13,Z,2,1,"td",73),t.bVm(),t.qex(14,77),t.DNE(15,W,2,0,"th",72)(16,q,2,1,"td",73),t.bVm(),t.qex(17,78),t.DNE(18,tt,2,0,"th",72)(19,it,2,1,"td",73),t.bVm(),t.qex(20,79),t.DNE(21,et,2,0,"th",72)(22,ot,3,3,"td",73),t.bVm(),t.qex(23,80),t.DNE(24,nt,2,0,"th",72)(25,rt,3,2,"td",73),t.bVm(),t.DNE(26,lt,1,0,"tr",81)(27,ut,1,0,"tr",82),t.k0s(),t.j41(28,"mat-paginator",83),t.bIt("page",function(o){t.eBV(i);const r=t.XpG(2);return t.Njj(r.onPageChange(o))}),t.k0s()()}if(2&e){const i=t.XpG(2);t.R7$(),t.Y8G("dataSource",i.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("pageIndex",i.currentPage)("length",i.totalCount)("pageSize",i.pageSize)("pageSizeOptions",t.lJ4(7,k))}}function dt(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",54)(1,"app-card",55)(2,"form",56)(3,"div",14)(4,"label",57),t.EFF(5,"\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s(),t.nrm(6,"input",58),t.k0s(),t.j41(7,"div",14)(8,"label",57),t.EFF(9,"\u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629"),t.k0s(),t.nrm(10,"input",59),t.k0s(),t.j41(11,"div",60)(12,"button",61),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.onSearch())}),t.EFF(13," \u0628\u062d\u062b "),t.nrm(14,"i",62),t.k0s()(),t.DNE(15,B,4,0,"div",63),t.nI1(16,"async"),t.k0s(),t.nrm(17,"br"),t.DNE(18,Y,2,0,"p",64)(19,ct,29,8,"div",65),t.k0s()()}if(2&e){const i=t.XpG();t.R7$(),t.Y8G("options",!1),t.R7$(),t.Y8G("formGroup",i.registerFormSearch),t.R7$(13),t.Y8G("ngIf",0!=t.bMT(16,5,i.definitionPositionFacade.PositionSubject$).items.length),t.R7$(3),t.Y8G("ngIf",0==i.dataSource.data.length),t.R7$(),t.Y8G("ngIf",0!=i.dataSource.data.length)}}const mt=[{path:"",component:(()=>{class e{constructor(i,n,o,r,Ct){this.fb=i,this.definitionPositionFacade=n,this.organizationalUnitFacade=o,this.jobTitleFacade=r,this.sharedFacade=Ct,this.displayedColumns=["positionCode","jobCode","jobTitleName","locationName","organizationStructureName","positionType","approvalDate","actions"],this.dataSource=new u.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0,this.currentPositionCode="",this.currentJobTitleId="",this.edit=!1,this.isChecked=!1,this.haveAdmin=!1,this.costCenter="",this.allPositions=[],this.filteredPositions=[],this.filteredJobTitles=[],this.allJobTitles=[],this.showDropdown=!1,this.searchTerm="",this.registerForm=this.fb.group({id:[""],positionCode:["",l.k0.required],jobTitleId:[null,l.k0.required],jobTitleName:[""],locationId:["",l.k0.required],locationName:[""],name:[{value:"",disabled:!0}],nameEn:[{value:"",disabled:!0}],organizationStructureId:["",l.k0.required],organizationStructureName:[""],positionType:["",l.k0.required],positionTypeName:[""],directManager:[""],directManagerName:[""],organizationalUnitNumber:[""],organizationalUnitNumberName:[""],specificUnit:[""],specificUnitName:[""],isAdmin:[!1],outsideStaffing:[!1],typePositionNationality:[!1],approvalDate:[""],Notes:this.fb.array([])}),this.registerFormSearch=this.fb.group({PositionCode:[""],JobTitleId:[""]}),this.optionsJobClassification=g.oz,this.optionsBooleanGeneral=g.Vy,this.optionsNationalityType=P.R}onPageChange(i){this.currentPage=i.pageIndex,this.pageSize=i.pageSize,this.loadPositions(this.currentPage+1,this.pageSize,this.currentPositionCode,this.currentJobTitleId)}loadOrganizationalUnitsLevel2(i,n){this.getOrganizationalUnitsByLevel(2,i,n)}loadOrganizationalUnitsLevel0(i,n){this.getOrganizationalUnitsByLevel(0,i,n)}loadLocations(i,n){this.definitionPositionFacade.GetLocations(i,n)}getOrganizationalUnitsByLevel(i,n,o){this.organizationalUnitFacade.GetOrganizationalUnitsByLevel(n,o,i)}onOrganizationalUnitsByLevel02elect(i){this.directManager=i.id,this.GetAllUnitsDepartment()}onLocationSelect(i){}loadPositions(i,n,o,r){this.definitionPositionFacade.GetPosition(i,n,o,r)}ngOnInit(){this.dataSource.paginator=this.paginator,this.edit=!1,this.organizationalUnitFacade.UnitsByDirectManagerSubject$.next([]),this.organizationalUnitFacade.AllUnitsBranchingFromSpecificUnitSubject$.next(m.A),this.organizationalUnitFacade.AllUnitsDepartmentSubject$.next(m.A),this.loadOrganizationalUnitsLevel0(1,10),this.loadOrganizationalUnitsLevel2(1,10),this.loadjobTitles(1,10),this.loadLocations(1,10),this.loadPositions(this.currentPage+1,this.pageSize,"",""),this.definitionPositionFacade.PositionSubject$.subscribe(i=>{this.dataSource.data=i.items,this.totalCount=i.totalCount})}loadjobTitles(i,n,o){this.jobTitleFacade.GetJobTitle(i,n,o)}createNote(){return this.fb.group({text:["",l.k0.required]})}filterPositions(i){this.filteredPositions=i.target.checked?this.definitionPositionFacade.PositionSubject$.getValue().items.filter(n=>n.outsideStaffing):[]}onSearch(){if(this.registerForm.controls.id.setValue(""),""!=this.registerFormSearch.value.PositionCode||""!=this.registerFormSearch.value.JobTitleId){const i=this.jobTitleFacade.JobTitleSubject$.getValue().items.find(n=>n.jobCode==this.registerFormSearch.value.JobTitleId);this.currentPositionCode=this.registerFormSearch.value.PositionCode,this.currentJobTitleId=i?i.id:this.registerFormSearch.value.JobTitleId,this.loadPositions(1,10,this.currentPositionCode,this.currentJobTitleId)}else this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0623\u0648 \u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629  ",[""])}onDelete(i){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0633\u062d\u061f")&&this.definitionPositionFacade.deletePosition(i).subscribe(()=>{this.edit=!1,this.registerForm.reset(),this.loadPositions(this.currentPage+1,this.pageSize,this.currentPositionCode,this.currentJobTitleId)})}onReset(){this.edit=!1,this.currentJobTitleId="",this.currentPositionCode="",this.registerForm.reset(),this.registerForm.setErrors(null),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.organizationalUnitFacade.UnitsByDirectManagerSubject$.next([]),this.organizationalUnitFacade.AllUnitsBranchingFromSpecificUnitSubject$.next(m.A),this.organizationalUnitFacade.AllUnitsDepartmentSubject$.next(m.A),this.loadPositions(this.currentPage+1,this.pageSize,this.currentPositionCode,this.currentJobTitleId),this.costCenter="",this.isChecked=!1,this.Notes.clear()}onAdd(){if(console.log(this.registerForm.value),null==this.registerForm.value.isAdmin&&this.registerForm.controls.isAdmin.setValue(!1),null==this.registerForm.value.outsideStaffing&&this.registerForm.controls.outsideStaffing.setValue(!1),null==this.registerForm.value.typePositionNationality&&this.registerForm.controls.typePositionNationality.setValue(!1),this.registerForm.valid){const i=this.jobTitleFacade.JobTitleSubject$.getValue().items.find(o=>o.id==this.registerForm.value.jobTitleId);this.registerForm.value.jobTitleName=""!=this.registerForm.value.jobTitleId&&null!=this.registerForm.value.jobTitleId?i.name:"",this.registerForm.value.positionTypeName=this.optionsNationalityType.find(o=>o.value.toString()==this.registerForm.value.positionType)?.label;const n=this.definitionPositionFacade.locationsSubject$.getValue().items.find(o=>o.id.toString()==this.registerForm.value.locationId);this.registerForm.value.locationName=""!=this.registerForm.value.locationId&&null!=this.registerForm.value.locationId?n.name:"",this.edit?this.definitionPositionFacade.UpdatePosition(this.registerForm?.value).subscribe(()=>{this.onReset()}):this.definitionPositionFacade.AddPosition(this.registerForm?.value).subscribe(()=>{this.onReset()})}else{if(""==this.registerForm.value.positionCode||this.registerForm.controls.positionCode.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629",[""]);if(""==this.registerForm.value.organizationStructureId||this.registerForm.controls.organizationStructureId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629",[""]);if(""==this.registerForm.value.locationId||null==this.registerForm.value.locationId||this.registerForm.controls.locationId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u0645\u0648\u0642\u0639 - \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0642\u0639",[""]);if(""==this.registerForm.value.jobTitleId||null==this.registerForm.value.jobTitleId||this.registerForm.controls.jobTitleId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629  ",[""]);if(""==this.registerForm.value.positionType||null==this.registerForm.value.positionType||this.registerForm.controls.positionType.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0648\u0638\u064a\u0641\u0629",[""])}}onEdit(i){this.registerForm.patchValue(i),this.registerForm.value.positionTypeName=this.optionsNationalityType.find(o=>o.value.toString()==this.registerForm.value.positionType)?.label;const n=this.jobTitleFacade.JobTitleSubject$.getValue().items.find(o=>o.id==i.jobTitleId);this.registerForm.controls.name.setValue(n.name),this.registerForm.controls.nameEn.setValue(n.nameEn),this.edit=!0}getJobTitleId(i){this.searchTerm=i.jobCode,this.registerForm.controls.jobTitleId.setValue(i.id),this.showDropdown=!1,this.registerForm.controls.name.setValue(""),this.registerForm.controls.nameEn.setValue(""),""!=this.registerForm.value.jobTitleId&&(this.registerForm.controls.name.setValue(i.name),this.registerForm.controls.nameEn.setValue(i.nameEn),this.haveAdmin=i.haveAdmin,this.showDropdown=!1)}hideDropdown(i){this.allJobTitles.filter(o=>o.jobCode.toLowerCase()==i.target.value.toLowerCase()),setTimeout(()=>{this.showDropdown=!1},200),""==this.searchTerm&&(this.registerForm.controls.jobTitleId.setValue(null),this.registerForm.controls.name.setValue(""),this.registerForm.controls.nameEn.setValue("")),this.filteredJobTitles.length<=0&&this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u062e\u0637\u0623 \u0641\u064a \u0631\u0645\u0632 \u0627\u0644\u0648\u0638\u064a\u0641\u0629",[""])}loadOrganizationalUnit(i,n){this.organizationalUnitFacade.GetAllUnitsDepartment(i,n,this.directManager)}GetAllUnitsDepartment(){this.registerForm.controls.organizationStructureId.setValue(this.registerForm.value?.directManager??"");const i=this.organizationalUnitFacade.OrganizationalUnitsByLevel2Subject$.getValue().items.find(n=>n.id==this.registerForm.value.organizationStructureId);this.registerForm.controls.organizationStructureName.setValue(""!==this.registerForm.value.organizationStructureId&&null!==this.registerForm.value.organizationStructureId?i?.name:""),this.costCenter=i?.costCenter,this.loadOrganizationalUnit(1,10),this.registerForm.controls.organizationalUnitNumber.setValue(""),this.registerForm.controls.organizationalUnitNumberName.setValue(""),this.registerForm.controls.specificUnit.setValue(""),this.registerForm.controls.specificUnitName.setValue("")}loadAllUnitsBranchingFromSpecificUnit(i,n){this.organizationalUnitFacade.GetAllUnitsBranchingFromSpecificUnit(i,n,this.registerForm.value?.organizationalUnitNumber)}getAllUnitsBranchingFromSpecificUnit(){this.registerForm.controls.organizationStructureId.setValue(this.registerForm.value?.organizationalUnitNumber??"");const i=this.organizationalUnitFacade.AllUnitsDepartmentSubject$.getValue().items.find(n=>n.id==this.registerForm.value.organizationStructureId);this.registerForm.controls.organizationStructureName.setValue(""!==this.registerForm.value.organizationStructureId&&null!==this.registerForm.value.organizationStructureId?i?.name:""),this.loadAllUnitsBranchingFromSpecificUnit(1,10),this.registerForm.controls.specificUnit.setValue(""),this.registerForm.controls.specificUnitName.setValue("")}toggleCheckbox(){this.isChecked=!this.isChecked}addNote(){const i=this.registerForm.get("Notes");0==i.length&&i.push(this.createNote())}removeNote(i){this.Notes.removeAt(i)}get Notes(){return this.registerForm.get("Notes")}onLocationIdSelect(i){this.registerForm.get("locationId").setValue(i.id)}selectSpecificUnit(i){this.registerForm.get("specificUnit").setValue(i.id),this.registerForm.controls.organizationStructureId.setValue(this.registerForm.value?.specificUnit??"");const n=this.organizationalUnitFacade.AllUnitsBranchingFromSpecificUnitSubject$.getValue().items.find(o=>o.id==this.registerForm.value.organizationStructureId);this.registerForm.controls.organizationStructureName.setValue(""!==this.registerForm.value.organizationStructureId&&null!==this.registerForm.value.organizationStructureId?n?.name:"")}getControl(i,n){return i.get(n)}onSearchJobTitles(i){}getJobCode(){const i=this.registerForm.controls.jobTitleId.value,n=this.filteredJobTitles.find(o=>o.id===i);return n?n.jobCode:""}transform(i,n){return i?n?(n=n.toLocaleLowerCase(),i.filter(o=>o.toLocaleLowerCase().includes(n))):i:[]}onSetJobTitle(i){this.registerForm.controls.name.setValue(i.name),this.registerForm.controls.nameEn.setValue(i.nameEn)}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(l.ok),t.rXU(v.L),t.rXU(F.$),t.rXU(b.Y),t.rXU(y.I))};static#i=this.\u0275cmp=t.VBU({type:e,selectors:[["app-rewards-types"]],viewQuery:function(n,o){if(1&n&&t.GBs(_.iy,5),2&n){let r;t.mGM(r=t.lsd())&&(o.paginator=r.first)}},decls:9,vars:2,consts:[[1,"position-relative"],[1,"position-absolute",2,"left","10px","top","10px","z-index","10"],["title","\u062a\u062c\u062f\u064a\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0646\u0627\u062a","mat-button","","type","button",1,"close","mat-button",3,"click"],[1,"material-icons","text-primary"],["class","col-sm-12",4,"ngIf"],["class","col-xl-12",4,"ngIf"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",3,"formGroup"],[1,"row"],[1,"form-group","col-md-2"],["for","inlineFormpositionCode"],["type","number","required","","formControlName","positionCode","id","inlineFormpositionCode",1,"form-control"],[1,"form-group","col-md-3"],["formControlName","directManager","formControlNameSpecificAccessAttribute","id",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["class","form-group col-md-3",4,"ngIf"],["class","form-group col-sm-2",4,"ngIf"],["formArrayName","locationId","formControlNameSpecificAccessAttribute","id",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["formControlName","jobTitleId","formControlNameSpecificAccessAttribute","id",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","nameEn",1,"form-control"],["formControlName","positionType","required","","aria-label","select example",1,"form-select"],["value","-1","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","date","formControlName","approvalDate","id","approvalDate",1,"form-control"],["class","form-group col-md-2",4,"ngIf"],[1,"form-check","col-sm-2","align-self-center","form-switch"],["for","flexSwitchCheckDefault",1,"form-check-label"],["formControlName","outsideStaffing","mdbCheckbox","","type","checkbox","id","flexSwitchCheckDefault",1,"form-check-input"],["for","flexSwitchTypePositionNationality"],["formControlName","typePositionNationality","mdbCheckbox","","type","checkbox","id","flexSwitchTypePositionNationality",1,"form-check-input",3,"change"],[1,"form-group","col-md-3","align-self-end"],["ngbDropdownToggle","","type","button",1,"btn","drp-icon","btn-rounded","btn-success",3,"click"],[1,"feather","icon-plus"],["formArrayName","Notes"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["formControlNameSpecificAccessAttribute","id","formControlName","organizationalUnitNumber",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["formControlName","specificUnit","formControlNameSpecificAccessAttribute","id",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],[1,"form-group","col-sm-2"],["type","text",1,"form-control",3,"disabled","value"],[3,"value"],["formControlName","isAdmin","required","","aria-label","select example",1,"form-select"],["value","false","selected","","disabled",""],[3,"formGroupName"],[1,"form-group","col-md-5"],[3,"for"],["type","text","formControlName","text","required","",1,"form-control",3,"id"],["class","text-danger",4,"ngIf"],[1,"form-group","col-md-1","align-self-end"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"close","mat-button",3,"click"],[1,"material-icons","text-danger"],[1,"text-danger"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0628\u062d\u062b","blockClass","table-border-style",3,"options"],["action","javascript:",1,"row","row-cols-md-auto","g-3","align-items-center",3,"formGroup"],["for","inlineFormInputPositionCode"],["type","text","formControlName","PositionCode","id","inlineFormInputPositionCode",1,"form-control"],["type","text","formControlName","JobTitleId","id","JobTitleId",1,"form-control"],[1,"col-12"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"feather","icon-info"],["class","form-check form-switch",4,"ngIf"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"form-check","form-switch"],["mdbCheckbox","","type","checkbox",1,"form-check-input",3,"change"],[1,"form-check-label"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","positionCode"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","jobCode"],["matColumnDef","jobTitleName"],["matColumnDef","locationName"],["matColumnDef","organizationStructureName"],["matColumnDef","positionType"],["matColumnDef","approvalDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"a",2),t.bIt("click",function(){return o.onReset()}),t.j41(3,"i",3),t.EFF(4,"refresh"),t.k0s()()(),t.nrm(5,"app-loading")(6,"app-messages"),t.DNE(7,w,58,27,"div",4)(8,dt,20,7,"div",5),t.k0s()),2&n&&(t.R7$(7),t.Y8G("ngIf",o.sharedFacade.hasPermission("AddPosition")||o.sharedFacade.hasPermission("UpdatePosition")),t.R7$(),t.Y8G("ngIf",o.sharedFacade.hasPermission("ViewPosition")))},dependencies:[d.Sq,d.bT,p.It,p.iY,l.qT,l.xH,l.y7,l.me,l.Q0,l.Zm,l.wz,l.BC,l.cb,l.YS,l.j4,l.JD,l.$R,l.v8,N.q,I.y,A.m,x.An,_.iy,u.Zl,u.tL,u.ji,u.cC,u.YV,u.iL,u.KS,u.$R,u.YZ,u.NB,C.i,d.Jj,d.vh],styles:[".dropdown-list[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;max-height:200px;overflow-y:auto;position:absolute;background-color:#fff;z-index:1000}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]})}return e})(),data:{breadcrumb:"\u062a\u0639\u0631\u064a\u0641 \u0648\u0638\u064a\u0641\u0629"}}];let pt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#i=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[h.iI.forChild(mt),h.iI]})}return e})();var ft=s(9183),ht=s(7591),gt=s(8964),_t=s(6600),vt=s(2798),Ft=s(9004);let bt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#i=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({providers:[v.L,T.V,F.$,gt.p,b.Y,Ft.c],imports:[d.MD,p.Hl,j.RG,S.fS,D.uc,l.X1,pt,ft.D6,ht.G,_t.Sy,vt.Ve,C.i,l.YN]})}return e})()}}]);