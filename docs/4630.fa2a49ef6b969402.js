"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[4630],{4630:(S,C,r)=>{r.r(C),r.d(C,{UsersModule:()=>ge});var i=r(177),_=r(8834),U=r(2102),b=r(9631),F=r(4823),u=r(9417),e=r(3953),D=r(1626),w=r(1441);let y=(()=>{class s{constructor(t,n){this.http=t,this.appConfig=n,this.url=this.appConfig.defaultUrl}AddUser(t){return this.http.post(`${this.url}/api/UserMangament/AddUser?culture=ar-LY`,t)}UpdateUser(t){return this.http.put(`${this.url}/api/UserMangament/UpdateUser?culture=ar-LY`,t)}DeleteUser(t){return this.http.delete(`${this.url}/api/UserMangament/DeleteUser?Id=${t}&culture=ar-LY`)}GetUsers(t,n){return this.http.get(`${this.url}/api/UserMangament/GetUsers?culture=ar-LY&Page=${t}&PageSize=${n}`)}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(D.Qq),e.KVO(w.o))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var p=r(8498),c=r(3471),o=r(9159),m=r(6695),d=r(4412),f=r(6496),g=r(8141),v=r(2802),j=r(3197);let A=(()=>{class s{constructor(t,n){this.sharedFacade=t,this.UserServices=n,this.UserSubject$=new d.t(v.A),this.Users$=this.UserSubject$.asObservable()}deleteUser(t){const n=this.UserServices.DeleteUser(t).pipe((0,g.M)(a=>{a.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success," \u062d\u0630\u0641 \u0645\u0633\u062a\u062e\u062f\u0645",["\u062a\u0645 \u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d"]):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641",a.messages)}),(0,f.t)());return this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe(),n}GetUser(t,n){const a=this.UserServices.GetUsers(t,n).pipe((0,g.M)(h=>{h.type==c.yl.Success?this.UserSubject$.next(h.content):(this.UserSubject$.next(v.A),this.sharedFacade.showMessage(c.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",h.messages))}),(0,f.t)());return this.sharedFacade.showLoaderUntilCompleted(a).pipe().subscribe(),a}AddUser(t){const n=this.UserServices.AddUser(t).pipe((0,g.M)(a=>{a.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",a.messages):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",a.messages)}),(0,f.t)());return this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe(),n}UpdateUser(t){const n=this.UserServices.UpdateUser(t).pipe((0,g.M)(a=>{a.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",a.messages):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u062a\u0639\u062f\u064a\u0644",a.messages)}),(0,f.t)());return this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe(),n}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(j.I),e.KVO(y))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var E=r(2356),$=r(643),I=r(2016),P=r(2702),k=r(6661),R=r(9213),G=r(9947);const x=()=>[5,10,20];function N(s,l){1&s&&(e.j41(0,"div",26),e.EFF(1," \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0637\u0648\u0644 \u0628\u064a\u0646 6 \u0625\u0644\u0649 16 \u062d\u0631\u0641 \u0648\u062a\u062a\u0636\u0645\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u062d\u0631\u0641 \u0635\u063a\u064a\u0631 \u0648\u0627\u062d\u062f \u0648\u062d\u0631\u0641 \u0643\u0628\u064a\u0631 \u0648\u0627\u062d\u062f \u0648\u0631\u0642\u0645 \u0648\u0627\u062d\u062f \u0648\u062d\u0631\u0641 \u062e\u0627\u0635 "),e.k0s())}function T(s,l){if(1&s&&(e.j41(0,"div",10)(1,"label",23),e.EFF(2,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),e.k0s(),e.nrm(3,"input",24),e.DNE(4,N,2,0,"div",25),e.k0s()),2&s){const t=e.XpG(2);e.R7$(3),e.Y8G("required",!t.edit),e.R7$(),e.Y8G("ngIf",t.f.password.invalid&&t.f.password.dirty)}}function M(s,l){1&s&&(e.j41(0,"div",26),e.EFF(1," \u0631\u062c\u0627\u0621 \u062a\u0623\u0643\u062f \u0645\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),e.k0s())}function V(s,l){if(1&s&&(e.j41(0,"div",10)(1,"label",27),e.EFF(2,"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),e.k0s(),e.nrm(3,"input",28),e.DNE(4,M,2,0,"div",25),e.k0s()),2&s){const t=e.XpG(2);e.R7$(3),e.Y8G("required",!t.edit),e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.invalid&&t.f.password.value!=t.f.confirmPassword.value)}}function Y(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",10)(1,"input",29),e.bIt("change",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changePass())}),e.k0s(),e.j41(2,"label",30),e.EFF(3,"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),e.k0s()()}}function O(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"label",11),e.EFF(6,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(7,"input",12),e.k0s(),e.j41(8,"div",10),e.nrm(9,"app-dynamic-dropdown",13),e.k0s(),e.j41(10,"div",10),e.nrm(11,"app-dynamic-dropdown",14),e.k0s(),e.j41(12,"div",10)(13,"label",15),e.EFF(14,"\u0627\u0633\u0645 \u0627\u0644\u062f\u062e\u0648\u0644"),e.k0s(),e.nrm(15,"input",16),e.k0s(),e.DNE(16,T,5,2,"div",17)(17,V,5,2,"div",17)(18,Y,4,0,"div",17),e.j41(19,"div",18),e.nrm(20,"input",19),e.j41(21,"label",20),e.EFF(22,"\u0646\u0634\u0637"),e.k0s()(),e.j41(23,"div",21)(24,"button",22),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onAdd())}),e.EFF(25,"\u062d\u0641\u0638"),e.k0s()()()()()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("formGroup",t.registerForm),e.R7$(6),e.Y8G("fetchData",t.loadGroupsMenu.bind(t))("data",t.permissionFacade.GroupsMenuSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),e.R7$(2),e.Y8G("fetchData",t.loadEmployees.bind(t))("data",t.employeeFacade.employeeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.R7$(5),e.Y8G("ngIf",t.f.changePassword.value||!t.edit),e.R7$(),e.Y8G("ngIf",t.f.changePassword.value||!t.edit),e.R7$(),e.Y8G("ngIf",t.edit)}}function z(s,l){1&s&&(e.j41(0,"p"),e.EFF(1," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"),e.k0s())}function B(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function L(s,l){if(1&s&&(e.j41(0,"td",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.JRh(t.name)}}function X(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u062f\u062e\u0648\u0644"),e.k0s())}function K(s,l){if(1&s&&(e.j41(0,"td",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.JRh(t.userName)}}function Z(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),e.k0s())}function J(s,l){if(1&s&&(e.j41(0,"td",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.JRh(t.roleName)}}function Q(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function H(s,l){if(1&s&&(e.j41(0,"td",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.JRh(t.employeeName)}}function W(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function q(s,l){if(1&s&&(e.j41(0,"td",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.JRh(t.isActive)}}function ee(s,l){1&s&&(e.j41(0,"th",48),e.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),e.k0s())}function te(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",52),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,h=e.XpG(3);return e.Njj(h.onEdit(a))}),e.j41(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()}}function se(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",53),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,h=e.XpG(3);return e.Njj(h.onDelete(a.id))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function ie(s,l){if(1&s&&(e.j41(0,"td",49),e.DNE(1,te,3,0,"button",50)(2,se,3,0,"button",51),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.sharedFacade.hasPermission("UpdateUser")),e.R7$(),e.Y8G("ngIf",t.sharedFacade.hasPermission("DeleteUser"))}}function oe(s,l){1&s&&e.nrm(0,"tr",54)}function ne(s,l){1&s&&e.nrm(0,"tr",55)}function re(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",35)(1,"table",36),e.qex(2,37),e.DNE(3,B,2,0,"th",38)(4,L,2,1,"td",39),e.bVm(),e.qex(5,40),e.DNE(6,X,2,0,"th",38)(7,K,2,1,"td",39),e.bVm(),e.qex(8,41),e.DNE(9,Z,2,0,"th",38)(10,J,2,1,"td",39),e.bVm(),e.qex(11,42),e.DNE(12,Q,2,0,"th",38)(13,H,2,1,"td",39),e.bVm(),e.qex(14,43),e.DNE(15,W,2,0,"th",38)(16,q,2,1,"td",39),e.bVm(),e.qex(17,44),e.DNE(18,ee,2,0,"th",38)(19,ie,3,2,"td",39),e.bVm(),e.DNE(20,oe,1,0,"tr",45)(21,ne,1,0,"tr",46),e.k0s(),e.j41(22,"mat-paginator",47),e.bIt("page",function(a){e.eBV(t);const h=e.XpG(2);return e.Njj(h.onPageChange(a))}),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("dataSource",t.dataSource),e.R7$(19),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("pageIndex",t.currentPage)("length",t.totalCount)("pageSize",t.pageSize)("pageSizeOptions",e.lJ4(7,x))}}function ae(s,l){if(1&s&&(e.j41(0,"div",31),e.EFF(1,"> "),e.j41(2,"app-card",32),e.DNE(3,z,2,0,"p",33)(4,re,23,8,"div",34),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.Y8G("options",!1),e.R7$(),e.Y8G("ngIf",0==t.dataSource.data.length),e.R7$(),e.Y8G("ngIf",0!=t.dataSource.data.length)}}const ue=[{path:"",component:(()=>{class s{loadUsers(t,n){return this.usersFacade.GetUser(t,n)}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadUsers(this.currentPage+1,this.pageSize)}loadGroupsMenu(t,n){this.permissionFacade.GetGroupsMenu(t,n)}ngOnInit(){this.changePass(),this.edit=!1,this.dataSource.paginator=this.paginator,this.registerForm.controls.id.setValue(""),this.loadEmployees(1,10),this.loadGroupsMenu(1,10),this.loadUsers(this.currentPage+1,this.pageSize),this.usersFacade.Users$.subscribe(t=>{this.dataSource.data=t.items,this.totalCount=t.totalCount})}constructor(t,n,a,h,ve){this.fb=t,this.usersFacade=n,this.employeeFacade=a,this.permissionFacade=h,this.sharedFacade=ve,this.displayedColumns=["name","userName","roleName","employeeName","isActive","actions"],this.dataSource=new o.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0,this.loadEmployees=(_e,Fe,ye)=>{this.employeeFacade.GetEmployee(_e,Fe)},this.edit=!1,this.registerForm=this.fb.group({id:[""],employeeId:[null],employeeName:[""],roleName:[""],name:["",u.k0.required],userName:["",u.k0.required],roleId:["",u.k0.required],password:[null,[u.k0.required,u.k0.minLength(6),u.k0.maxLength(16),u.k0.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,16}$/)]],confirmPassword:["",[u.k0.required,u.k0.minLength(6),u.k0.maxLength(16),u.k0.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,16}$/)]],isActive:[!1],changePassword:[!0]})}get f(){return this.registerForm.controls}changePass(){this.registerForm.value.changePassword?(this.registerForm.controls.password.setValidators([u.k0.minLength(6),u.k0.maxLength(16),u.k0.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,16}$/)]),this.registerForm.controls.confirmPassword.setValidators([u.k0.minLength(6),u.k0.maxLength(16),u.k0.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,16}$/)])):(this.registerForm.controls.password.clearValidators(),this.registerForm.controls.confirmPassword.clearValidators())}onDelete(t){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0633\u062d\u061f")&&this.usersFacade.deleteUser(t).subscribe(()=>{this.onReset()})}onReset(){return this.edit=!1,this.registerForm.reset(),this.registerForm.setErrors(null),this.registerForm.controls.isActive.setValue(!1),this.loadUsers(this.currentPage+1,this.pageSize)}onAdd(){const t=this.employeeFacade.employeeSubject$.getValue().items.find(a=>a.id==this.registerForm.value.employeeId),n=this.permissionFacade.GroupsMenuSubject$.getValue().items.find(a=>a.id==this.registerForm.value.roleId);if(this.registerForm.value.roleName=""!=this.registerForm.value.roleId?n.name:"",this.registerForm.value.employeeName=""!=this.registerForm.value.employeeId&&null!=this.registerForm.value.employeeId?t.name:"",this.registerForm.valid)this.edit?this.usersFacade.UpdateUser(this.registerForm?.value).subscribe(()=>{this.onReset()}):this.usersFacade.AddUser(this.registerForm?.value).subscribe(()=>{this.onReset().subscribe(()=>{this.paginator.lastPage()})});else{if(""==this.registerForm.value.name)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645  ",[""]);if(this.registerForm.controls.roleId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629",[""]);if(this.registerForm.controls.userName.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u062f\u062e\u0648\u0644",[""]);if(""==this.registerForm.value.password||" "==this.registerForm.value.confirmPassword||this.registerForm.controls.password.invalid&&this.registerForm.value.changePassword)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0637\u0648\u0644 \u064a\u062a\u0631\u0627\u0648\u062d \u0628\u064a\u0646 6 \u0625\u0644\u0649 16\u062d\u0631\u0641 \u0648\u062a\u062a\u0636\u0645\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u062d\u0631\u0641 \u0635\u063a\u064a\u0631 \u0648\u0627\u062d\u062f \u0648\u062d\u0631\u0641 \u0643\u0628\u064a\u0631 \u0648\u0627\u062d\u062f \u0648\u0631\u0642\u0645 \u0648\u0627\u062d\u062f \u0648\u062d\u0631\u0641 \u062e\u0627\u0635 \u0648\u0627\u062d\u062f",[""]);if(this.registerForm.value.password!=this.registerForm.value.confirmPassword&&(this.registerForm.value.changePassword||this.edit))return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c  \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629",[""])}}onEdit(t){this.registerForm.patchValue(t),this.registerForm.controls.password.clearValidators(),this.registerForm.controls.confirmPassword.clearValidators(),this.registerForm.controls.password.setValue(null),this.registerForm.controls.confirmPassword.setValue(""),this.registerForm.controls.changePassword.setValue(!1),this.edit=!0}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(u.ok),e.rXU(A),e.rXU(E.n),e.rXU($.y),e.rXU(j.I))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-rewards-types"]],viewQuery:function(n,a){if(1&n&&e.GBs(m.iy,5),2&n){let h;e.mGM(h=e.lsd())&&(a.paginator=h.first)}},decls:9,vars:2,consts:[[1,"position-relative"],[1,"position-absolute",2,"left","10px","top","10px","z-index","10"],["title","\u062a\u062c\u062f\u064a\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0646\u0627\u062a","mat-button","","type","button",1,"close","mat-button",3,"click"],[1,"material-icons","text-primary"],["class","col-sm-12",4,"ngIf"],["class","col-xl-12",4,"ngIf"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-md-3"],["for","inlineFormInputName"],["type","text","required","","formControlName","name","id","inlineFormInputName",1,"form-control"],["formControlName","roleId","formControlNameSpecificAccessAttribute","id",3,"fetchData","data","displayKey","pageSize","placeholder"],["formControlName","employeeId","formControlNameSpecificAccessAttribute","id",3,"fetchData","data","displayKey","pageSize","placeholder"],["for","inlineFormInputUserName"],["type","text","required","","formControlName","userName","id","inlineFormInputUserName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-md-2"],["formControlName","isActive","type","checkbox","id","inlineFormCheckActive",1,"form-check-input"],["for","inlineFormCheckActive",1,"form-check-label","px-2"],[1,"col-12"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["for","inlineFormInputPassword"],["type","password","formControlName","password","id","inlineFormInputPassword",1,"form-control",3,"required"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["for","inlineFormInputConfirmPassword"],["type","password","formControlName","confirmPassword","id","inlineFormInputConfirmPassword",1,"form-control",3,"required"],["formControlName","changePassword","type","checkbox","id","inlineFormCheckPass",1,"form-check-input",3,"change"],["for","inlineFormCheckPass",1,"form-check-label","px-2"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646","blockClass","table-border-style",3,"options"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","roleName"],["matColumnDef","employeeName"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"a",2),e.bIt("click",function(){return a.onReset()}),e.j41(3,"i",3),e.EFF(4,"refresh"),e.k0s()()(),e.nrm(5,"app-loading")(6,"app-messages"),e.DNE(7,O,26,14,"div",4)(8,ae,5,3,"div",5),e.k0s()),2&n&&(e.R7$(7),e.Y8G("ngIf",a.sharedFacade.hasPermission("AddUser")||a.sharedFacade.hasPermission("UpdateUser")),e.R7$(),e.Y8G("ngIf",a.sharedFacade.hasPermission("ViewUser")))},dependencies:[i.bT,_.It,_.iY,u.qT,u.me,u.Zm,u.BC,u.cb,u.YS,u.j4,u.JD,I.q,P.y,k.m,R.An,m.iy,o.Zl,o.tL,o.ji,o.cC,o.YV,o.iL,o.KS,o.$R,o.YZ,o.NB,G.i]})}return s})(),data:{breadcrumb:"\u0627\u0644\u0635\u0641\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}}];let le=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({imports:[p.iI.forChild(ue),p.iI]})}return s})();var de=r(9183),ce=r(7591),me=r(6401),pe=r(5842),he=r(2798),fe=r(2765);let ge=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({providers:[A,y,$.y,me.g,E.n,pe.v],imports:[i.MD,_.Hl,U.RG,b.fS,F.uc,u.X1,le,de.D6,ce.G,u.YN,he.Ve,fe.g7,G.i]})}return s})()},6661:(S,C,r)=>{r.d(C,{m:()=>y});var i=r(3953),_=r(9417),U=r(1413),b=r(152),F=r(177);const u=["dropdownMenu"];function e(p,c){if(1&p){const o=i.RV6();i.j41(0,"li")(1,"a",8),i.bIt("mousedown",function(){const d=i.eBV(o).$implicit,f=i.XpG();return i.Njj(f.onSelectionChange(d))}),i.EFF(2),i.k0s()()}if(2&p){const o=c.$implicit,m=i.XpG();i.R7$(2),i.SpI(" ",o[m.displayKey]," ")}}function D(p,c){1&p&&(i.j41(0,"li",9)(1,"div",10)(2,"span",11),i.EFF(3,"Loading..."),i.k0s()()())}function w(p,c){1&p&&(i.j41(0,"li",12)(1,"small"),i.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),i.k0s()())}let y=(()=>{class p{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new i.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new U.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,b.B)(500)).subscribe(o=>{this.searchQuery=o,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,o)})}ngOnChanges(o){o.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(o=>{this.items=1===this.currentPage?o.items:[...this.items,...o.items],this.totalCount=o.totalCount,this.loading=!1})}onScroll(o){const m=o.target;m.scrollTop+m.clientHeight+5>=m.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(o){this.onChange(this.formControlNameSpecificAccessAttribute?o[this.formControlNameSpecificAccessAttribute]:o),this.selectedOption=o,this.optionSelected.emit(o),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const o=this.dropdownMenu.nativeElement;o.style.display="block"===o.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(o){this.searchSubject.next(o)}writeValue(o){this.selectedOption=o}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.isDisabled=o}static#e=this.\u0275fac=function(m){return new(m||p)};static#t=this.\u0275cmp=i.VBU({type:p,selectors:[["app-dynamic-dropdown"]],viewQuery:function(m,d){if(1&m&&i.GBs(u,5),2&m){let f;i.mGM(f=i.lsd())&&(d.dropdownMenu=f.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[i.Jv_([{provide:_.kq,useExisting:(0,i.Rfq)(()=>p),multi:!0}]),i.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(m,d){if(1&m){const f=i.RV6();i.j41(0,"div",2,0)(2,"label"),i.EFF(3),i.k0s(),i.j41(4,"input",3),i.bIt("blur",function(){return i.eBV(f),i.Njj(d.closeDropdown())})("click",function(){return i.eBV(f),i.Njj(d.toggleDropdown())})("input",function(v){return i.eBV(f),i.Njj(d.onSearch(v.target.value))}),i.k0s(),i.j41(5,"ul",4,1),i.bIt("scroll",function(v){return i.eBV(f),i.Njj(d.onScroll(v))}),i.DNE(7,e,3,1,"li",5)(8,D,4,0,"li",6)(9,w,3,0,"li",7),i.k0s()()}2&m&&(i.R7$(3),i.JRh(d.placeholder),i.R7$(),i.FS9("placeholder",d.placeholder),i.Y8G("value",d.selectedOption?d.selectedOption[d.displayKey]:"")("disabled",d.isDisabled)("ngClass",d.ngClass),i.R7$(3),i.Y8G("ngForOf",d.items),i.R7$(),i.Y8G("ngIf",d.loading),i.R7$(),i.Y8G("ngIf",0===d.items.length&&!d.loading))},dependencies:[F.YU,F.Sq,F.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return p})()}}]);