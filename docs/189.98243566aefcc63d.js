"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[189],{189:($,B,o)=>{o.r(B),o.d(B,{BankBranchesModule:()=>me});var n=o(177),k=o(2102),D=o(9631),S=o(4823),h=o(9417),C=o(1626),e=o(3953),j=o(1441);let F=(()=>{class a{constructor(t,s){this.http=t,this.appConfig=s,this.url=this.appConfig.defaultUrl}AddBranch(t){return this.http.post(`${this.url}/api/Branches/AddBranch?culture=ar-LY`,t)}UpdateBranch(t){return this.http.put(`${this.url}/api/Branches/UpdateBranch?culture=ar-LY`,t)}DeleteBranch(t){return this.http.delete(`${this.url}/api/Branches/DeleteBranch?Id=${t}&culture=ar-LY`)}GetBranch(t,s,i,l,_){let p=new C.Nl;return""!=l&&null!=l&&(p=p.set("BankId",l)),""!=_&&null!=_&&(p=p.set("BankClasscificationId",_)),p=p.set("IsActive",i),p=p.set("culture","ar-LY"),p=p.set("Page",t),p=p.set("PageSize",s),this.http.get(`${this.url}/api/Branches/GetBranchs`,{params:p})}Activate(t,s){return this.http.put(`${this.url}/api/Branches/ActiveDeActiveBranch?Id=${t}&IsActive=${s}&culture=ar-LY`,null)}static#e=this.\u0275fac=function(s){return new(s||a)(e.KVO(C.Qq),e.KVO(j.o))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var y=o(8498),c=o(3471),f=o(9159),r=o(6695),m=o(4412),u=o(6496),g=o(8141),v=o(2802),b=o(3197);let R=(()=>{class a{constructor(t,s){this.sharedFacade=t,this.bankBranchesServices=s,this.BankBranchesSubject$=new m.t(v.A),this.BankBranches$=this.BankBranchesSubject$.asObservable()}deleteBranch(t){const s=this.bankBranchesServices.DeleteBranch(t).pipe((0,g.M)(i=>{i.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success," \u062d\u0630\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641",["\u062a\u0645 \u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d"]):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641",i.messages)}),(0,u.t)());return this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe(),s}GetBranch(t,s,i,l){const _=this.bankBranchesServices.GetBranch(t,s,0,i,l).pipe((0,g.M)(p=>{p.type==c.yl.Success?this.BankBranchesSubject$.next(p.content):(this.BankBranchesSubject$.next(v.A),this.sharedFacade.showMessage(c.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0641\u0631\u0648\u0639",p.messages))}),(0,u.t)());return this.sharedFacade.showLoaderUntilCompleted(_).pipe().subscribe(),_}AddBranch(t){const s=this.bankBranchesServices.AddBranch(t).pipe((0,g.M)(i=>{i.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",i.messages):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",i.messages)}),(0,u.t)());return this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe(),s}UpdateBranch(t){const s=this.bankBranchesServices.UpdateBranch(t).pipe((0,g.M)(i=>{i.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",i.messages):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u062a\u0639\u062f\u064a\u0644",i.messages)}),(0,u.t)());return this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe(),s}activate(t,s){const i=this.bankBranchesServices.Activate(t,s).pipe((0,g.M)(l=>{l.type==c.yl.Success?this.sharedFacade.showMessage(c.Go.success," \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0641\u0631\u0639",["\u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0628\u0646\u062c\u0627\u062d"]):this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d",l.messages)}),(0,u.t)());return this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe(),i}static#e=this.\u0275fac=function(s){return new(s||a)(e.KVO(b.I),e.KVO(F))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var A=o(3303),x=o(9456),I=o(8834),E=o(2016),T=o(2702),P=o(6661),N=o(9213),w=o(9947);const V=()=>[5,10,20];function M(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"div",11)(6,"label",12),e.EFF(7,"\u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639"),e.k0s(),e.nrm(8,"input",13),e.k0s(),e.j41(9,"div",11)(10,"label",14),e.EFF(11,"\u0627\u0644\u0631\u0645\u0632"),e.k0s(),e.j41(12,"input",15),e.bIt("input",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onInput(i))}),e.k0s()(),e.j41(13,"div",16),e.nrm(14,"app-dynamic-dropdown",17),e.k0s(),e.j41(15,"div",16),e.nrm(16,"app-dynamic-dropdown",18),e.k0s()(),e.j41(17,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onAdd())}),e.EFF(18,"\u062d\u0641\u0638"),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.Y8G("formGroup",t.registerForm),e.R7$(11),e.Y8G("fetchData",t.fetchBanks.bind(t))("data",t.banksFacade.BanksSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0635\u0631\u0641"),e.R7$(2),e.Y8G("fetchData",t.fetchClassificationBankBranches.bind(t))("data",t.classificationBankBranchesFacade.ClassificationBranchSubject$)("displayKey","name")("pageSize",10)("placeholder","\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641")}}function O(a,d){1&a&&(e.j41(0,"p"),e.EFF(1,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"),e.k0s())}function Y(a,d){1&a&&(e.j41(0,"th",41),e.EFF(1,"\u0627\u0644\u0627\u0633\u0645"),e.k0s())}function z(a,d){if(1&a&&(e.j41(0,"td",42),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.JRh(t.name)}}function U(a,d){1&a&&(e.j41(0,"th",41),e.EFF(1,"\u0627\u0644\u0631\u0645\u0632"),e.k0s())}function X(a,d){if(1&a&&(e.j41(0,"td",42),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.JRh(t.prefix)}}function K(a,d){1&a&&(e.j41(0,"th",41),e.EFF(1,"\u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s())}function L(a,d){if(1&a&&(e.j41(0,"td",42),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.JRh(t.bankName)}}function Q(a,d){1&a&&(e.j41(0,"th",41),e.EFF(1,"\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s())}function H(a,d){if(1&a&&(e.j41(0,"td",42),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.JRh(t.bankClasscificationName)}}function J(a,d){1&a&&(e.j41(0,"th",41),e.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),e.k0s())}function W(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.onEdit(i))}),e.j41(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()}}function Z(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.onDelete(i.id))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function q(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.activate(i))}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function ee(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.activate(i))}),e.j41(1,"mat-icon"),e.EFF(2,"check"),e.k0s()()}}function te(a,d){if(1&a&&(e.j41(0,"td",42),e.DNE(1,W,3,0,"button",43)(2,Z,3,0,"button",44)(3,q,3,0,"button",44)(4,ee,3,0,"button",45),e.k0s()),2&a){const t=d.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",s.sharedFacade.hasPermission("UpdateBranch")),e.R7$(),e.Y8G("ngIf",s.sharedFacade.hasPermission("DeleteBranch")),e.R7$(),e.Y8G("ngIf",1==t.isActive&&s.sharedFacade.hasPermission("ActiveDeActiveBranch")),e.R7$(),e.Y8G("ngIf",0==t.isActive&&s.sharedFacade.hasPermission("ActiveDeActiveBranch"))}}function ae(a,d){1&a&&e.nrm(0,"tr",49)}function ne(a,d){1&a&&e.nrm(0,"tr",50)}function se(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",29)(1,"table",30),e.qex(2,31),e.DNE(3,Y,2,0,"th",32)(4,z,2,1,"td",33),e.bVm(),e.qex(5,34),e.DNE(6,U,2,0,"th",32)(7,X,2,1,"td",33),e.bVm(),e.qex(8,35),e.DNE(9,K,2,0,"th",32)(10,L,2,1,"td",33),e.bVm(),e.qex(11,36),e.DNE(12,Q,2,0,"th",32)(13,H,2,1,"td",33),e.bVm(),e.qex(14,37),e.DNE(15,J,2,0,"th",32)(16,te,5,4,"td",33),e.bVm(),e.DNE(17,ae,1,0,"tr",38)(18,ne,1,0,"tr",39),e.k0s(),e.j41(19,"mat-paginator",40),e.bIt("page",function(i){e.eBV(t);const l=e.XpG(2);return e.Njj(l.onPageChange(i))}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("dataSource",t.dataSource),e.R7$(16),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("pageIndex",t.currentPage)("length",t.totalCount)("pageSize",t.pageSize)("pageSizeOptions",e.lJ4(7,V))}}function ie(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",20)(1,"app-card",21)(2,"form",22)(3,"div",23),e.nrm(4,"app-dynamic-dropdown",24),e.k0s(),e.j41(5,"div",23),e.nrm(6,"app-dynamic-dropdown",25),e.k0s(),e.j41(7,"div",26)(8,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.EFF(9,"\u0628\u062d\u062b"),e.k0s()(),e.nrm(10,"br")(11,"br"),e.k0s(),e.nrm(12,"br"),e.DNE(13,O,2,0,"p",27)(14,se,20,8,"div",28),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("options",!1),e.R7$(),e.Y8G("formGroup",t.registerFormSearch),e.R7$(2),e.Y8G("fetchData",t.fetchBanks.bind(t))("data",t.banksFacade.BanksSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0635\u0631\u0641"),e.R7$(2),e.Y8G("fetchData",t.fetchClassificationBankBranches.bind(t))("data",t.classificationBankBranchesFacade.ClassificationBranchSubject$)("displayKey","name")("pageSize",10)("placeholder","\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641"),e.R7$(7),e.Y8G("ngIf",0==t.dataSource.data.length),e.R7$(),e.Y8G("ngIf",0!=t.dataSource.data.length)}}const oe=[{path:"",component:(()=>{class a{ngOnDestroy(){this.subscriptions.map((t,s)=>{t.unsubscribe()})}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadBankBranchesFacade(this.currentPage+1,this.pageSize,this.registerFormSearch.value.bankId,this.registerFormSearch.value.classcificationId)}loadBankBranchesFacade(t,s,i,l){return this.bankBranchesFacade.GetBranch(t,s,i,l)}ngOnInit(){this.dataSource.paginator=this.paginator,this.edit=!1,this.registerForm.controls.id.setValue(""),this.fetchBanks(1,10),this.fetchClassificationBankBranches(1,10),this.loadBankBranchesFacade(this.currentPage+1,this.pageSize,"",""),this.bankBranchesFacade.BankBranches$.subscribe(t=>{this.dataSource.data=t.items,this.totalCount=t.totalCount})}constructor(t,s,i,l,_){this.fb=t,this.bankBranchesFacade=s,this.banksFacade=i,this.classificationBankBranchesFacade=l,this.sharedFacade=_,this.displayedColumns=["name","prefix","bankName","bankClasscificationName","actions"],this.dataSource=new f.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0,this.subscriptions=[],this.fetchBanks=(p,G,fe)=>{this.banksFacade.GetBanks(p,G,0)},this.fetchClassificationBankBranches=(p,G,fe)=>{this.classificationBankBranchesFacade.GetClassificationBranch(p,G,1)},this.edit=!1,this.registerForm=this.fb.group({id:[""],name:["",h.k0.required],prefix:[null,[h.k0.required,h.k0.maxLength(3)]],bank:[null,h.k0.required],bankClasscification:[null,h.k0.required]}),this.registerFormSearch=this.fb.group({bankId:["",h.k0.required],classcificationId:["",h.k0.required]})}onSearch(){this.registerForm.controls.id.setValue(""),this.loadBankBranchesFacade(this.currentPage+1,this.pageSize,this.registerFormSearch.value.bankId,this.registerFormSearch.value.classcificationId)}onDelete(t){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0633\u062d\u061f")&&this.subscriptions.push(this.bankBranchesFacade.deleteBranch(t).subscribe(()=>{this.onReset()}))}onReset(){return this.edit=!1,this.registerForm.reset(),this.registerForm.setErrors(null),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.loadBankBranchesFacade(this.currentPage+1,this.pageSize,this.registerFormSearch.value.bankId||"",this.registerFormSearch.value.classcificationId||"")}onAdd(){if(this.registerForm.valid){const t={...this.registerForm.value,bankId:this.registerForm.value.bank.id??null,bankName:this.registerForm.value.bank.name??null,bankClasscificationId:this.registerForm.value.bankClasscification.id??null,bankClasscificationName:this.registerForm.value.bankClasscification.name??null};this.subscriptions.push(this.edit?this.bankBranchesFacade.UpdateBranch(t).subscribe(()=>{this.onReset()}):this.bankBranchesFacade.AddBranch(t).subscribe(()=>{this.onReset()}))}else{if(""==this.registerForm.value.name||this.registerForm.controls.name.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639",[""]);if(null==this.registerForm.value.prefix||this.registerForm.controls.prefix.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0631\u0645\u0632 ",[""]);if(this.registerForm.controls.bank.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0635\u0631\u0641",[""]);if(this.registerForm.controls.bankClasscification.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641",[""])}}onEdit(t){this.registerForm.patchValue({...t,bank:{name:t.bankName,id:t.bankId},bankClasscification:{name:t.bankClasscificationName,id:t.bankClasscificationId}}),this.edit=!0}onInput(t){const s=t.target;s.value.length>3&&(s.value=s.value.slice(0,3))}activate(t){this.subscriptions.push(this.bankBranchesFacade.activate(t.id,!t.isActive).subscribe(()=>{this.onReset()}))}static#e=this.\u0275fac=function(s){return new(s||a)(e.rXU(h.ok),e.rXU(R),e.rXU(A.I),e.rXU(x.T),e.rXU(b.I))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-rewards-types"]],viewQuery:function(s,i){if(1&s&&e.GBs(r.iy,5),2&s){let l;e.mGM(l=e.lsd())&&(i.paginator=l.first)}},decls:9,vars:2,consts:[[1,"position-relative"],[1,"position-absolute",2,"left","10px","top","10px","z-index","10"],["title","\u062a\u062c\u062f\u064a\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0646\u0627\u062a","mat-button","","type","button",1,"close","mat-button",3,"click"],[1,"material-icons","text-primary"],["class","col-sm-12",4,"ngIf"],["class","col-xl-12",4,"ngIf"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",3,"formGroup"],[1,"row"],[1,"form-group","col-md-2"],["for","inlineFormInputName"],["type","text","required","","formControlName","name","id","inlineFormInputName",1,"form-control"],["for","inlineFormInputPrefix"],["type","number","maxlength","3","required","","formControlName","prefix","id","inlineFormInputPrefix",1,"form-control",3,"input"],[1,"form-group","col-md-3","align-self-end"],["formControlName","bank",3,"fetchData","data","displayKey","pageSize","placeholder"],["formControlName","bankClasscification",3,"fetchData","data","displayKey","pageSize","placeholder"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0628\u062d\u062b","blockClass","table-border-style",3,"options"],["action","javascript:",1,"row","row-cols-md-auto","g-3","align-items-center",3,"formGroup"],[1,"form-group","col-md-3"],["formControlName","bankId","formControlNameSpecificAccessAttribute","id",3,"fetchData","data","displayKey","pageSize","placeholder"],["formControlName","classcificationId","formControlNameSpecificAccessAttribute","id",3,"fetchData","data","displayKey","pageSize","placeholder"],[1,"col-12","align-self-end"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","prefix"],["matColumnDef","bankName"],["matColumnDef","bankClasscificationName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","class","text-success",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","",1,"text-success",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"a",2),e.bIt("click",function(){return i.onReset()}),e.j41(3,"i",3),e.EFF(4,"refresh"),e.k0s()()(),e.nrm(5,"app-loading")(6,"app-messages"),e.DNE(7,M,19,11,"div",4)(8,ie,15,14,"div",5),e.k0s()),2&s&&(e.R7$(7),e.Y8G("ngIf",i.sharedFacade.hasPermission("AddBranch")||i.sharedFacade.hasPermission("UpdateBranch")),e.R7$(),e.Y8G("ngIf",i.sharedFacade.hasPermission("ViewBranch")))},dependencies:[n.bT,I.It,I.iY,h.qT,h.me,h.Q0,h.BC,h.cb,h.YS,h.tU,h.j4,h.JD,E.q,T.y,P.m,N.An,r.iy,f.Zl,f.tL,f.ji,f.cC,f.YV,f.iL,f.KS,f.$R,f.YZ,f.NB,w.i]})}return a})(),data:{breadcrumb:"\u0641\u0631\u0648\u0639 \u0627\u0644\u0645\u0635\u0627\u0631\u0641"}}];let re=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#a=this.\u0275inj=e.G2t({imports:[y.iI.forChild(oe),y.iI]})}return a})();var ce=o(9183),le=o(7591),ue=o(9861),de=o(9038),he=o(6600),pe=o(2798);let me=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.$C({type:a});static#a=this.\u0275inj=e.G2t({providers:[R,F,A.I,ue.U,x.T,de.e],imports:[n.MD,I.Hl,k.RG,D.fS,S.uc,h.X1,re,ce.D6,le.G,he.Sy,pe.Ve,w.i]})}return a})()},6661:($,B,o)=>{o.d(B,{m:()=>y});var n=o(3953),k=o(9417),D=o(1413),S=o(152),h=o(177);const C=["dropdownMenu"];function e(c,f){if(1&c){const r=n.RV6();n.j41(0,"li")(1,"a",8),n.bIt("mousedown",function(){const u=n.eBV(r).$implicit,g=n.XpG();return n.Njj(g.onSelectionChange(u))}),n.EFF(2),n.k0s()()}if(2&c){const r=f.$implicit,m=n.XpG();n.R7$(2),n.SpI(" ",r[m.displayKey]," ")}}function j(c,f){1&c&&(n.j41(0,"li",9)(1,"div",10)(2,"span",11),n.EFF(3,"Loading..."),n.k0s()()())}function F(c,f){1&c&&(n.j41(0,"li",12)(1,"small"),n.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),n.k0s()())}let y=(()=>{class c{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new n.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new D.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,S.B)(500)).subscribe(r=>{this.searchQuery=r,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,r)})}ngOnChanges(r){r.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(r=>{this.items=1===this.currentPage?r.items:[...this.items,...r.items],this.totalCount=r.totalCount,this.loading=!1})}onScroll(r){const m=r.target;m.scrollTop+m.clientHeight+5>=m.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(r){this.onChange(this.formControlNameSpecificAccessAttribute?r[this.formControlNameSpecificAccessAttribute]:r),this.selectedOption=r,this.optionSelected.emit(r),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const r=this.dropdownMenu.nativeElement;r.style.display="block"===r.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(r){this.searchSubject.next(r)}writeValue(r){this.selectedOption=r}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.isDisabled=r}static#e=this.\u0275fac=function(m){return new(m||c)};static#t=this.\u0275cmp=n.VBU({type:c,selectors:[["app-dynamic-dropdown"]],viewQuery:function(m,u){if(1&m&&n.GBs(C,5),2&m){let g;n.mGM(g=n.lsd())&&(u.dropdownMenu=g.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[n.Jv_([{provide:k.kq,useExisting:(0,n.Rfq)(()=>c),multi:!0}]),n.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(m,u){if(1&m){const g=n.RV6();n.j41(0,"div",2,0)(2,"label"),n.EFF(3),n.k0s(),n.j41(4,"input",3),n.bIt("blur",function(){return n.eBV(g),n.Njj(u.closeDropdown())})("click",function(){return n.eBV(g),n.Njj(u.toggleDropdown())})("input",function(b){return n.eBV(g),n.Njj(u.onSearch(b.target.value))}),n.k0s(),n.j41(5,"ul",4,1),n.bIt("scroll",function(b){return n.eBV(g),n.Njj(u.onScroll(b))}),n.DNE(7,e,3,1,"li",5)(8,j,4,0,"li",6)(9,F,3,0,"li",7),n.k0s()()}2&m&&(n.R7$(3),n.JRh(u.placeholder),n.R7$(),n.FS9("placeholder",u.placeholder),n.Y8G("value",u.selectedOption?u.selectedOption[u.displayKey]:"")("disabled",u.isDisabled)("ngClass",u.ngClass),n.R7$(3),n.Y8G("ngForOf",u.items),n.R7$(),n.Y8G("ngIf",u.loading),n.R7$(),n.Y8G("ngIf",0===u.items.length&&!u.loading))},dependencies:[h.YU,h.Sq,h.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return c})()},2802:($,B,o)=>{o.d(B,{A:()=>k});const k={currentPage:0,items:[],pageSize:0,totalCount:0,totalPages:0}}}]);