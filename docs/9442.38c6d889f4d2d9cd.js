"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[9442],{2208:($,v,o)=>{o.d(v,{Gu:()=>d,HH:()=>S,PE:()=>y,QJ:()=>b,Ql:()=>_,Sq:()=>n,UH:()=>e,VF:()=>C,Vy:()=>l,a8:()=>r,ez:()=>F,lP:()=>c,oz:()=>m,r9:()=>f});let l=[{value:!0,label:"\u0646\u0639\u0645"},{value:!1,label:"\u0644\u0627"}],b=[{value:"A",label:"\u0639\u0644\u064a\u0627"},{value:"B",label:"\u062a\u0646\u0641\u064a\u0630\u064a\u0647"},{value:"C",label:"\u0623\u0633\u0627\u0633\u064a\u0629"}],r=[{value:1,label:"\u0630\u0643\u0631"},{value:2,label:"\u0627\u0646\u062b\u064a"}],m=[{value:1,label:"\u0645\u0633\u062a\u062e\u062f\u0645"},{value:2,label:"\u0645\u062f\u064a\u0631 \u0625\u062f\u0627\u0631\u0629"},{value:3,label:"\u0631\u0626\u064a\u0633 \u0642\u0633\u0645"},{value:4,label:"\u0631\u0626\u064a\u0633 \u0648\u062d\u062f\u0629"},{value:5,label:"\u0645\u062f\u064a\u0631 \u0639\u0627\u0645"},{value:6,label:"\u0645\u062f\u064a\u0631 \u0645\u0643\u062a\u0628"}],y=[{value:1,label:"\u0645\u0645\u062a\u0627\u0632"},{value:2,label:"\u062c\u064a\u062f \u062c\u062f\u0627"},{value:3,label:"\u062c\u064a\u062f"},{value:4,label:"\u0645\u062a\u0648\u0633\u0637 "},{value:5,label:"\u0636\u0639\u064a\u0641 "},{value:6,label:"\u0625\u064a\u0641\u0627\u062f "},{value:7,label:"\u0644\u0627\u064a\u0648\u062c\u062f "}],e=[{value:1,label:"\u0623\u0639\u0632\u0628"},{value:2,label:"\u0645\u062a\u0632\u0648\u062c \u0648\u0644\u0627\u064a\u0639\u0648\u0644"},{value:3,label:"\u0645\u062a\u0632\u0648\u062c \u0648\u064a\u0639\u0648\u0644"}],C=[{value:1,label:"\u0645\u0646\u0633\u0628"},{value:2,label:"\u062a\u0639\u064a\u064a\u0646"},{value:3,label:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"},{value:4,label:"\u0646\u0642\u0644"},{value:6,label:"\u062a\u0639\u064a\u064a\u0646 \u0628\u0645\u0648\u0627\u0641\u0642\u0629 \u0627\u0644\u0645\u0624\u0633\u0633\u0629"}],F=[{value:1,label:"\u062f\u0627\u062e\u0644"},{value:2,label:"\u062e\u0627\u0631\u062c"}],S=[{value:1,label:"\u0623\u0645"},{value:2,label:"\u0623\u0628"},{value:3,label:"\u0632\u0648\u062c\u0629_\u0632\u0648\u062c"},{value:4,label:"\u0627\u0628\u0646"},{value:5,label:"\u0627\u0628\u0646\u0629"}],_=[{value:"49",label:"\u0627\u0644\u062f\u064a\u0646\u0627\u0631_\u0627\u0644\u0644\u064a\u0628\u064a_\u0644\u0644\u0645\u0642\u064a\u0645\u064a\u0646_\u0628\u0637\u0631\u0627\u0628\u0644\u0633"},{value:"52",label:"\u0627\u0644\u062f\u064a\u0646\u0627\u0631_\u0627\u0644\u0644\u064a\u0628\u064a_\u0644\u0644\u0645\u0642\u064a\u0645\u064a\u0646_\u0628\u0627\u0644\u062d\u0642\u0648\u0644_\u0627\u0644\u0646\u0641\u0637\u064a\u0629"},{value:"65",label:"\u062f\u0648\u0644\u0627\u0631_\u0623\u0645\u0631\u064a\u0643\u064a_\u0633\u0648\u0642_\u0623\u0645\u0631\u064a\u0643\u0627_\u0646\u064a\u0648\u0632\u064a\u0644\u0646\u062f\u0627_\u0623\u0645\u0631\u064a\u0643\u0627_\u0627\u0644\u0634\u0645\u0627\u0644\u064a\u0629_\u0648\u0627\u0644\u062c\u0646\u0648\u0628\u064a\u0629_\u0643\u0646\u062f\u0627_\u0627\u0644\u064a\u0627\u0628\u0627\u0646"},{value:"66",label:"\u062c\u0646\u064a\u0647_\u0627\u0633\u062a\u0631\u0644\u064a\u0646\u064a_\u0633\u0648\u0642_\u0628\u0631\u064a\u0637\u0627\u0646\u064a\u0627"},{value:"67",label:"\u064a\u0648\u0631\u0648_\u0633\u0648\u0642_\u0623\u0648\u0631\u0648\u0628\u0627_\u0627\u0644\u063a\u0631\u0628\u064a\u0629_\u0627\u0644\u0623\u0633\u0643\u0646\u062f\u0646\u0627\u0641\u064a\u0629_\u062c\u0645\u064a\u0639_\u062f\u0648\u0644_\u0627\u0644\u063a\u0631\u0628\u064a\u0629"},{value:"68",label:"\u064a\u0648\u0631\u0648_\u0633\u0648\u0642_\u0623\u0648\u0631\u0648\u0628\u0627_\u0627\u0644\u0634\u0631\u0642\u064a\u0629_\u0635\u0631\u0628\u064a\u0627_\u0643\u0631\u0648\u0627\u062a\u064a\u0627_\u0627\u0644\u0628\u0648\u0633\u0646\u0629_\u062a\u0631\u0643\u064a\u0627_\u0631\u0648\u0633\u064a\u0627_\u0623\u0648\u0643\u0631\u0627\u0646\u064a\u0627_\u0628\u0648\u0644\u0646\u062f\u0627_\u0631\u0648\u0645\u0627\u0646\u064a\u0627"},{value:"69",label:"\u062f\u0648\u0644\u0627\u0631_\u0623\u0645\u0631\u064a\u0643\u064a_\u0633\u0648\u0642_\u0627\u0644\u0634\u0631\u0642_\u0627\u0644\u0623\u0648\u0633\u0637_\u0627\u0644\u062f\u0648\u0644_\u0627\u0644\u0639\u0631\u0628\u064a\u0629_\u0625\u064a\u0631\u0627\u0646_\u0625\u0641\u0631\u064a\u0642\u064a\u0627"},{value:"70",label:"\u062f\u0648\u0644\u0627\u0631_\u0623\u0645\u0631\u064a\u0643\u064a_\u0633\u0648\u0642_\u0627\u0644\u0634\u0631\u0642_\u0627\u0644\u0623\u0642\u0635\u0649_\u0627\u0644\u0647\u0646\u062f_\u0643\u0648\u0631\u064a\u0627_\u0627\u0644\u0635\u064a\u0646_\u0628\u0627\u0643\u0633\u062a\u0627\u0646_\u0628\u0646\u063a\u0644\u0627\u062f\u064a\u0634_\u0627\u0644\u0641\u0644\u0628\u064a\u0646_\u062a\u0627\u064a\u0644\u0627\u0646\u062f"}],d=[{value:41,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0628\u0633\u0628\u0628_\u0642\u0627\u0646\u0648\u0646\u064a - 41"},{value:42,label:"\u0641\u0635\u0644 \u0628\u0633\u0628\u0628 \u0636\u0639\u0641 \u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u0623\u062f\u0627\u0621 - 42"},{value:43,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0628\u0633\u0628\u0628_\u0635\u062d\u064a - 43"},{value:44,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0628\u0633\u0628\u0628_\u0627\u0644\u0648\u0641\u0627\u0629 - 44"},{value:45,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0628\u0633\u0628\u0628_\u0627\u0644\u062a\u0642\u0627\u0639\u062f - 45"},{value:46,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0627\u0633\u0628\u0627\u0628_\u0627\u062e\u0631\u0649 - 46"},{value:33,label:"\u0627\u0633\u062a\u0642\u0627\u0644\u0629 \u0627\u0633\u0628\u0627\u0628_\u0634\u062e\u0635\u064a\u0629 - 33"},{value:34,label:"\u0627\u0633\u062a\u0642\u0627\u0644\u0629 \u0627\u0633\u0628\u0627\u0628_\u0635\u062d\u064a\u0629 - 34"},{value:38,label:"\u0627\u0633\u062a\u0642\u0627\u0644\u0629 \u0644\u0627\u0633\u0628\u0627\u0628_\u062e\u0631\u0649 - 38"},{value:30,label:"\u0646\u0642\u0644_\u062f\u0627\u062e\u0644_\u0627\u0644\u0642\u0637\u0627\u0639 - 30"},{value:31,label:"\u0646\u0642\u0644_\u062e\u0627\u0631\u062c_\u0627\u0644\u0642\u0637\u0627\u0639 - 31"},{value:50,label:"\u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0629 \u0644\u0634\u0647\u064a\u062f_\u0627\u0644\u0648\u0627\u062c\u0628 - 50"}],f=[{id:"128b34e8-6595-446c-b630-4a8e5f214d83",name:"\u0645\u0635\u062d\u0629 \u0627\u0644\u0646\u0641\u0637 \u2013 \u0637\u0631\u0627\u0628\u0644\u0633"},{id:"eb06d390-2879-41d8-ae24-5db13ba5f140",name:"\u0645\u0635\u062d\u0629 \u0627\u0628\u0646 \u0633\u064a\u0646\u0627\u0621 \u2013 \u0628\u0646\u063a\u0627\u0632\u064a"},{id:"4148f325-142c-47a8-bf39-b2ce174ea974",name:"\u0645\u0635\u062d\u0640\u0629 \u062c\u0627\u0644\u0648"}],n=[{value:0,label:"\u0634\u0627\u063a\u0631\u0629"},{value:1,label:"\u0641\u0639\u0644\u064a\u0647"},{value:2,label:"\u0645\u0646\u062a\u062f\u0628 \u0639\u0644\u064a\u0647\u0627"}],c=[{value:0,label:"\u0645\u0645\u062a\u0627\u0632"},{value:1,label:"\u062c\u064a\u062f \u062c\u062f\u0627"},{value:2,label:"\u062c\u064a\u062f"},{value:3,label:"\u0645\u0642\u0628\u0648\u0644"}]},2721:($,v,o)=>{o.r(v),o.d(v,{ClinicsModule:()=>X});var l=o(177),b=o(8498),r=o(9417),m=o(3471),y=o(2208),e=o(3953),C=o(4412),F=o(6496),S=o(6354),_=o(8141),d=o(3197),f=o(1626),n=o(1441);let c=(()=>{class a{constructor(t,i){this.http=t,this.appConfig=i,this.url=this.appConfig.defaultUrl}AddClinic(t){return this.http.post(`${this.url}/api/Clinic/AddEmployeeForClinic?culture=ar-LY`,t)}UpdateClinic(t){return this.http.put(`${this.url}/api/Banks/UpdateBank?culture=ar-LY`,t)}DeleteClinics(t){return this.http.delete(`${this.url}/api/Banks/DeleteBank?Id=${t}&culture=ar-LY`)}GetEmplyeeClinics(t,i){let s=(new f.Nl).set("culture","ar-LY");return this.http.get(`${this.url}/api/Employee/GetAllEmployee`,{params:s})}static#e=this.\u0275fac=function(i){return new(i||a)(e.KVO(f.Qq),e.KVO(n.o))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var u=o(8655);let h=(()=>{class a{constructor(t,i,s){this.sharedFacade=t,this.clinicsServices=i,this.employeeGlobalServices=s,this.ClinicsSubject$=new C.t([]),this.Clinics$=this.ClinicsSubject$.asObservable(),this.EmployeeSubject$=new C.t(null),this.Employee$=this.EmployeeSubject$.asObservable()}GetEmplyeeClinics(t){const i=this.clinicsServices.GetEmplyeeClinics(1,t).pipe((0,_.M)(s=>{s.type==m.yl.Success?this.ClinicsSubject$.next(s.content):(this.ClinicsSubject$.next([]),this.sharedFacade.showMessage(m.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",s.messages))}),(0,F.t)());this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe()}AddClinic(t){const i=this.clinicsServices.AddClinic(t).pipe((0,_.M)(s=>{s.type==m.yl.Success?(this.sharedFacade.showMessage(m.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",s.messages),this.EmployeeSubject$.next(null)):(this.EmployeeSubject$.next(null),this.sharedFacade.showMessage(m.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",s.messages))}),(0,F.t)());this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe()}GetEmployee(t,i){const s=this.employeeGlobalServices.GetEmployee(1,1,t,i).pipe((0,_.M)(p=>{p.type==m.yl.Success?this.EmployeeSubject$.next(p.content.items[0]):(this.EmployeeSubject$.next(null),this.sharedFacade.showMessage(m.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",p.messages))}),(0,F.t)());return this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe(),s.pipe((0,S.T)(p=>p.type===m.yl.Success?p.content.items[0]:null))}static#e=this.\u0275fac=function(i){return new(i||a)(e.KVO(d.I),e.KVO(c),e.KVO(u.U))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var E=o(2356),j=o(2016),G=o(2702),I=o(6661);function A(a,g){if(1&a&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&a){const t=g.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function N(a,g){1&a&&(e.j41(0,"h5"),e.EFF(1,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0639\u0627\u0626\u0644\u0629 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s())}function k(a,g){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td",31)(2,"input",32),e.bIt("change",function(s){const p=e.eBV(t).$implicit,D=e.XpG(4);return e.Njj(D.addFamily(s,p))}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s()()}if(2&a){const t=g.$implicit,i=e.XpG(4);e.R7$(2),e.Y8G("checked",i.isSelected(t)),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(1==t.gender?"\u0630\u0643\u0631":"\u0627\u0646\u062b\u0649"),e.R7$(2),e.JRh(i.getLabelForDescription(t.description)),e.R7$(2),e.JRh(e.bMT(11,5,t.birthDate))}}function T(a,g){if(1&a&&(e.j41(0,"table",29)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"\u0627\u0633\u0645"),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u0627\u0644\u062c\u0646\u0633"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0635\u0644\u0629 \u0627\u0644\u0642\u0631\u0627\u0628\u0629"),e.k0s(),e.j41(10,"th"),e.EFF(11,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"),e.k0s()()(),e.j41(12,"tbody"),e.DNE(13,k,12,7,"tr",30),e.nI1(14,"async"),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(13),e.Y8G("ngForOf",e.bMT(14,1,t.clinicsFacade.Employee$).familyData)}}function R(a,g){if(1&a&&(e.j41(0,"div",13)(1,"h5",14),e.EFF(2,"\u0623\u0641\u0631\u0627\u062f \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0641\u064a \u0645\u0644\u0641 \u0627\u0644\u062a\u0623\u0645\u064a\u0646"),e.k0s(),e.nrm(3,"hr"),e.j41(4,"div",26),e.DNE(5,N,2,0,"h5",27),e.nI1(6,"async"),e.DNE(7,T,15,3,"table",28),e.nI1(8,"async"),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(5),e.Y8G("ngIf",0==e.bMT(6,2,t.clinicsFacade.Employee$).familyData.length),e.R7$(2),e.Y8G("ngIf",0!=e.bMT(8,4,t.clinicsFacade.Employee$).familyData.length)}}function w(a,g){if(1&a){const t=e.RV6();e.j41(0,"div",33)(1,"button",34),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onAdd())}),e.EFF(2,"\u062d\u0641\u0638"),e.k0s(),e.j41(3,"button",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onReset())}),e.EFF(4,"\u062c\u062f\u064a\u062f"),e.k0s()()}}function M(a,g){if(1&a&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",0)(4,"div",13)(5,"h5",14),e.EFF(6,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(7,"hr"),e.j41(8,"form",15)(9,"div",16)(10,"div",17)(11,"label"),e.EFF(12,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(13,"input",18),e.nI1(14,"async"),e.k0s(),e.j41(15,"div",19)(16,"label"),e.EFF(17,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(18,"input",18),e.nI1(19,"async"),e.k0s()(),e.j41(20,"div",16)(21,"div",17)(22,"label"),e.EFF(23,"\u0627\u0644\u0625\u062f\u0627\u0631\u0629"),e.k0s(),e.nrm(24,"input",18),e.nI1(25,"async"),e.k0s(),e.j41(26,"div",19)(27,"label"),e.EFF(28,"\u0627\u0644\u0645\u0648\u0642\u0639"),e.k0s(),e.nrm(29,"input",18),e.nI1(30,"async"),e.k0s()(),e.j41(31,"div",16)(32,"div",17)(33,"label"),e.EFF(34,"\u0627\u0644\u0648\u0638\u064a\u0641\u0629"),e.k0s(),e.nrm(35,"input",18),e.nI1(36,"async"),e.k0s(),e.j41(37,"div",19)(38,"label"),e.EFF(39,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0635\u062d\u0629"),e.k0s(),e.j41(40,"select",20)(41,"option",21),e.EFF(42,"\u0627\u062e\u062a\u0631..."),e.k0s(),e.DNE(43,A,2,2,"option",22),e.k0s()()()()(),e.DNE(44,R,9,6,"div",23),e.nI1(45,"async"),e.k0s(),e.nrm(46,"br"),e.DNE(47,w,5,0,"div",24),e.nI1(48,"async"),e.k0s()()()),2&a){const t=e.XpG();e.R7$(8),e.Y8G("formGroup",t.registerForm),e.R7$(5),e.Y8G("value",e.bMT(14,9,t.clinicsFacade.Employee$).employeeCode),e.R7$(5),e.Y8G("value",e.bMT(19,11,t.clinicsFacade.Employee$).name),e.R7$(6),e.Y8G("value",e.bMT(25,13,t.clinicsFacade.Employee$).managementName),e.R7$(5),e.Y8G("value",e.bMT(30,15,t.clinicsFacade.Employee$).locationName),e.R7$(6),e.Y8G("value",e.bMT(36,17,t.clinicsFacade.Employee$).jobTitleName),e.R7$(8),e.Y8G("ngForOf",t.optionsClinic),e.R7$(),e.Y8G("ngIf",null!=e.bMT(45,19,t.clinicsFacade.Employee$)),e.R7$(3),e.Y8G("ngIf",null!=e.bMT(48,21,t.clinicsFacade.Employee$)&&t.rest)}}const O=[{path:"",component:(()=>{class a{constructor(t,i,s,p,D){this._formBuilder=t,this.clinicsFacade=i,this.sharedFacade=s,this.employeeFacade=p,this.cdr=D,this.edit=!1,this.phoneNumberPattern="[0][9]{1}[1,2,4,3,5]{1}[0-9]{7}",this.listFamily=[],this.rest=!1,this.registerForm=this._formBuilder.group({employeeId:[""],employeeCode:[{value:"",disabled:!0}],name:[{value:"",disabled:!0}],organizationStructureName:[{value:"",disabled:!0}],locationName:[{value:"",disabled:!0}],jobTitleName:[{value:"",disabled:!0}],clinicId:["",r.k0.required],family:[]}),this.registerFormSearch=this._formBuilder.group({value:["",r.k0.required],code:[""],phoneNumber:["",[r.k0.minLength(10),r.k0.maxLength(10),r.k0.pattern(this.phoneNumberPattern)]],employeeName:[""]}),this.loadEmployees=(z,H,Q)=>{this.employeeFacade.GetEmployee(z,H)},this.optionsClinic=y.r9,this.optionsFamilyDescription=y.HH,this.onSubmit()}onEmployeeSelect(t){this.rest=!1,this.registerFormSearch.controls.employeeName.setValue(t.name)}ngOnInit(){this.edit=!1,this.rest=!1,this.loadEmployees(1,10)}onSubmit(){this.registerForm.controls.employeeId.setValue(""),this.clinicsFacade.GetEmplyeeClinics("-1")}onSearch(){if(this.listFamily=[],!(""!=this.registerFormSearch.value.code&&null!=this.registerFormSearch.value.code||""!=this.registerFormSearch.value.employeeName&&null!=this.registerFormSearch.value.employeeName||""!=this.registerFormSearch.value.phoneNumber&&null!=this.registerFormSearch.value.phoneNumber))return void this.sharedFacade.showMessage(m.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0628\u062d\u062b   ",[""]);if(this.registerFormSearch.controls.phoneNumber.invalid&&""!=this.registerFormSearch.value.phoneNumber&&null!=this.registerFormSearch.value.phoneNumber)return void this.sharedFacade.showMessage(m.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644  \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0635\u064a\u063a\u0629 \u0635\u062d\u064a\u062d\u0629  ",[""]);this.clinicsFacade.GetEmployee(""!=this.registerFormSearch.controls.employeeName.value&&null!=this.registerFormSearch.controls.employeeName.value?"2":""!=this.registerFormSearch.controls.code.value&&null!=this.registerFormSearch.controls.code.value?"1":"3",""!=this.registerFormSearch.controls.employeeName.value&&null!=this.registerFormSearch.controls.employeeName.value?this.registerFormSearch.value.employeeName:""!=this.registerFormSearch.controls.code.value&&null!=this.registerFormSearch.controls.code.value?this.registerFormSearch.value.code:this.registerFormSearch.value.phoneNumber).subscribe(p=>{this.clinicsFacade.EmployeeSubject$.next(p)}),this.cdr.detectChanges(),this.rest=!0;const s=this.clinicsFacade.EmployeeSubject$.getValue();null!=s&&(this.listFamily.push(s.familyData),this.registerForm.controls.employeeId.setValue(s.id),this.registerForm.controls.family.setValue(s.familyData))}getLabelForDescription(t){const i=this.optionsFamilyDescription.find(s=>s.value.toString()==t);return i?i.label:""}onReset(){this.edit=!1,this.registerForm.reset(),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.registerForm.setErrors(null),this.clinicsFacade.ClinicsSubject$.next(null),this.clinicsFacade.Clinics$.subscribe(),this.listFamily=[],this.rest=!1}addFamily(t,i){t.target.checked?this.listFamily.push({name:i.name,gender:i.gender,description:i.description}):this.listFamily=this.listFamily.filter(s=>s.name!=i.name)}isSelected(t){return this.listFamily.includes(i=>i.name==t.name)}onSelectAll(){this.listFamily.push(this.clinicsFacade.EmployeeSubject$.getValue().familyData)}onAdd(){const t=this.clinicsFacade.EmployeeSubject$.getValue();null!=t&&this.registerForm.controls.employeeId.setValue(t.id),this.registerForm.valid?(this.clinicsFacade.AddClinic({employeeId:this.registerForm.value.employeeId,clinicId:this.registerForm.value.clinicId,family:this.listFamily}),this.onReset()):this.showNotification("\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0635\u062d\u0629 ","")}showNotification(t,i){this.sharedFacade.showMessage(m.Go.warning,t,[""])}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(r.ok),e.rXU(h),e.rXU(d.I),e.rXU(E.n),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-clinics"]],decls:24,vars:9,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-md-2"],["formControlName","employeeName","formControlNameSpecificAccessAttribute","name",3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["type","text","required","","formControlName","code","id","employeeCode",1,"form-control"],["type","text","required","","formControlName","phoneNumber","id","phoneNumber",1,"form-control"],[1,"col-md-3","align-self-end"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"feather","icon-info"],["class","col-sm-12",4,"ngIf"],[1,"col-md-6"],[1,"mt-2"],["action","javascript:",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-4"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-sm-6"],["formControlName","clinicId","required","","aria-label","select example",1,"form-select"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],["class","col-12",4,"ngIf"],[3,"value"],[1,"table-responsive"],[4,"ngIf"],["class","table table-hover",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"td-actions"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"col-12"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.nrm(1,"app-loading")(2,"app-messages"),e.j41(3,"div",1)(4,"div",2)(5,"div",3)(6,"form",4)(7,"div",0)(8,"div",5)(9,"app-dynamic-dropdown",6),e.bIt("optionSelected",function(D){return s.onEmployeeSelect(D)}),e.k0s()(),e.j41(10,"div",5)(11,"label"),e.EFF(12,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(13,"input",7),e.k0s(),e.j41(14,"div",5)(15,"label"),e.EFF(16,"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(17,"input",8),e.k0s(),e.j41(18,"div",9)(19,"button",10),e.bIt("click",function(){return s.onSearch()}),e.EFF(20," \u0628\u062d\u062b "),e.nrm(21,"i",11),e.k0s()()()()()()(),e.DNE(22,M,49,23,"div",12),e.nI1(23,"async"),e.k0s()),2&i&&(e.R7$(6),e.Y8G("formGroup",s.registerFormSearch),e.R7$(3),e.Y8G("fetchData",s.loadEmployees.bind(s))("data",s.employeeFacade.employeeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.R7$(13),e.Y8G("ngIf",null!=e.bMT(23,7,s.clinicsFacade.Employee$)&&s.rest))},dependencies:[l.Sq,l.bT,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.YS,r.j4,r.JD,j.q,G.y,I.m,l.Jj,l.vh]})}return a})(),data:{breadcrumb:"\u0627\u0644\u0645\u0635\u062d\u0627\u062a"}}];let P=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#l=this.\u0275inj=e.G2t({imports:[b.iI.forChild(O),b.iI]})}return a})();var B=o(7591),V=o(9947),x=o(4823),Y=o(9631),U=o(8834),L=o(5842),K=o(3391);let X=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#l=this.\u0275inj=e.G2t({providers:[h,c,E.n,L.v],imports:[l.MD,P,r.X1,B.G,V.i,x.uc,Y.fS,U.Hl,K.h_]})}return a})()},6661:($,v,o)=>{o.d(v,{m:()=>_});var l=o(3953),b=o(9417),r=o(1413),m=o(152),y=o(177);const e=["dropdownMenu"];function C(d,f){if(1&d){const n=l.RV6();l.j41(0,"li")(1,"a",8),l.bIt("mousedown",function(){const u=l.eBV(n).$implicit,h=l.XpG();return l.Njj(h.onSelectionChange(u))}),l.EFF(2),l.k0s()()}if(2&d){const n=f.$implicit,c=l.XpG();l.R7$(2),l.SpI(" ",n[c.displayKey]," ")}}function F(d,f){1&d&&(l.j41(0,"li",9)(1,"div",10)(2,"span",11),l.EFF(3,"Loading..."),l.k0s()()())}function S(d,f){1&d&&(l.j41(0,"li",12)(1,"small"),l.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),l.k0s()())}let _=(()=>{class d{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new l.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new r.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,m.B)(500)).subscribe(n=>{this.searchQuery=n,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,n)})}ngOnChanges(n){n.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(n=>{this.items=1===this.currentPage?n.items:[...this.items,...n.items],this.totalCount=n.totalCount,this.loading=!1})}onScroll(n){const c=n.target;c.scrollTop+c.clientHeight+5>=c.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(n){this.onChange(this.formControlNameSpecificAccessAttribute?n[this.formControlNameSpecificAccessAttribute]:n),this.selectedOption=n,this.optionSelected.emit(n),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const n=this.dropdownMenu.nativeElement;n.style.display="block"===n.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(n){this.searchSubject.next(n)}writeValue(n){this.selectedOption=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.isDisabled=n}static#e=this.\u0275fac=function(c){return new(c||d)};static#t=this.\u0275cmp=l.VBU({type:d,selectors:[["app-dynamic-dropdown"]],viewQuery:function(c,u){if(1&c&&l.GBs(e,5),2&c){let h;l.mGM(h=l.lsd())&&(u.dropdownMenu=h.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[l.Jv_([{provide:b.kq,useExisting:(0,l.Rfq)(()=>d),multi:!0}]),l.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(c,u){if(1&c){const h=l.RV6();l.j41(0,"div",2,0)(2,"label"),l.EFF(3),l.k0s(),l.j41(4,"input",3),l.bIt("blur",function(){return l.eBV(h),l.Njj(u.closeDropdown())})("click",function(){return l.eBV(h),l.Njj(u.toggleDropdown())})("input",function(j){return l.eBV(h),l.Njj(u.onSearch(j.target.value))}),l.k0s(),l.j41(5,"ul",4,1),l.bIt("scroll",function(j){return l.eBV(h),l.Njj(u.onScroll(j))}),l.DNE(7,C,3,1,"li",5)(8,F,4,0,"li",6)(9,S,3,0,"li",7),l.k0s()()}2&c&&(l.R7$(3),l.JRh(u.placeholder),l.R7$(),l.FS9("placeholder",u.placeholder),l.Y8G("value",u.selectedOption?u.selectedOption[u.displayKey]:"")("disabled",u.isDisabled)("ngClass",u.ngClass),l.R7$(3),l.Y8G("ngForOf",u.items),l.R7$(),l.Y8G("ngIf",u.loading),l.R7$(),l.Y8G("ngIf",0===u.items.length&&!u.loading))},dependencies:[y.YU,y.Sq,y.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return d})()},2802:($,v,o)=>{o.d(v,{A:()=>b});const b={currentPage:0,items:[],pageSize:0,totalCount:0,totalPages:0}}}]);