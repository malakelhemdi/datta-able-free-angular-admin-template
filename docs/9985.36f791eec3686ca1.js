"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[9985],{9985:($,R,r)=>{r.r(R),r.d(R,{TimeOffRequestModule:()=>ye});var a=r(177),D=r(8834),j=r(2102),M=r(9631),y=r(4823),d=r(9417),e=r(3953),x=r(1626),N=r(1441);let O=(()=>{class n{constructor(t,s){this.http=t,this.appConfig=s,this.url=this.appConfig.defaultUrl}AddTimeOffRequest(t){return this.http.post(`${this.url}/api/TimeOffRequest/AddTimeOffRequest?culture=ar-LY`,t)}UpdateUser(t){return this.http.put(`${this.url}/api/UserMangament/UpdateUser?culture=ar-LY`,t)}DeleteUser(t){return this.http.delete(`${this.url}/api/UserMangament/DeleteUser?Id=${t}&culture=ar-LY`)}GetUsers(){return this.http.get(`${this.url}/api/UserMangament/GetUsers?culture=ar-LY`)}GetMyTimeOffRequests(t,s,i){return this.http.get(`${this.url}/api/TimeOffRequest/GetMyTimeOffRequests`,{params:{IsApproved:i,Page:t,PageSize:s,culture:"ar-LY"}})}DeleteTimeOffRequest(t){return this.http.put(`${this.url}/api/TimeOffRequest/DeleteTimeOffRequest?Ids=${t}&culture=ar-LY`,null)}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(x.Qq),e.KVO(N.o))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var f=r(8498),v=r(5351),o=r(3471),m=r(3197),u=r(2356),h=r(1624),T=r(8203),b=r(6661);function q(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4)(4,"div",5)(5,"div",6)(6,"app-dynamic-dropdown",7),e.bIt("optionSelected",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onEmployeeSelect(i))}),e.k0s()(),e.j41(7,"div",6)(8,"app-dynamic-dropdown",7),e.bIt("optionSelected",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onVacationsTypesSelect(i))}),e.k0s()()(),e.j41(9,"div",5)(10,"div",6)(11,"label"),e.EFF(12,"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"div",6)(15,"label"),e.EFF(16,"\u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"),e.k0s(),e.nrm(17,"input",9),e.k0s()(),e.j41(18,"div",5)(19,"div",10)(20,"label"),e.EFF(21,"\u0645\u0644\u0627\u062d\u0638\u0629"),e.k0s(),e.nrm(22,"input",11),e.k0s()(),e.nrm(23,"br"),e.j41(24,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.add())}),e.EFF(25,"\u0637\u0644\u0628"),e.k0s(),e.j41(26,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeDialog())}),e.EFF(27,"\u0625\u0644\u063a\u0627\u0621"),e.k0s()()()()()}if(2&n){const t=e.XpG();e.Y8G("dir","rtl"),e.R7$(3),e.Y8G("formGroup",t.registerForm),e.R7$(3),e.Y8G("fetchData",t.loadEmployees.bind(t))("data",t.employeeFacade.employeeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.R7$(2),e.Y8G("fetchData",t.loadvacationsTypes.bind(t))("data",t.vacationsTypesFacade.VacationsTypeSubject$)("displayKey","name")("pageSize",10)("placeholder","\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629")}}let E=(()=>{class n{onVacationsTypesSelect(t){this.registerForm.controls.vacationType.setValue(t)}onEmployeeSelect(t){this.loadvacationsTypes(1,10,t.id),this.registerForm.controls.employeeId.setValue(t)}loadvacationsTypes(t,s,i){this.vacationsTypesFacade.GetAvailableVacationTypes(i)}constructor(t,s,i,l,p,_){this.fb=t,this.dialogRef=s,this.sharedFacade=i,this.employeeFacade=l,this.data=p,this.vacationsTypesFacade=_,this.loadEmployees=(C,Te,Ce)=>{this.employeeFacade.GetEmployee(C,Te)},this.registerForm=this.fb.group({vacationsType:[null,d.k0.required],employeeId:[null],totalday:[null,d.k0.required],date:[null,d.k0.required],vacationType:[null,d.k0.required],startDate:[null,d.k0.required],endDate:[null,d.k0.required],description:[null,d.k0.required]}),this.loadvacationsTypes(1,10,""),this.loadEmployees(1,10)}closeDialog(){this.dialogRef.close()}add(){this.data.date=new Date(this.registerForm.controls.startDate.value),this.registerForm.value.vacationType&&(this.data.timeOffs=this.registerForm.value.vacationType.name),""!=this.registerForm.controls.vacationType.value&&null!=this.registerForm.controls.vacationType.value?""!=this.registerForm.controls.startDate.value&&null!=this.registerForm.controls.startDate.value?""!=this.registerForm.controls.endDate.value&&null!=this.registerForm.controls.endDate.value?""!=this.registerForm.controls.description.value&&null!=this.registerForm.controls.description.value?(this.data.extra={vacationTypeId:this.registerForm.controls.vacationType.value.id,employeeId:this.registerForm.value.employeeId?this.registerForm.controls.employeeId.value.id:"",startDate:this.registerForm.controls.startDate.value,endDate:this.registerForm.controls.endDate.value,description:this.registerForm.controls.description.value},this.dialogRef.close(this.data)):this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0648\u0635\u0641 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 ",[""]):this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 ",[""]):this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 ",[""]):this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",[""])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(d.ok),e.rXU(v.CP),e.rXU(m.I),e.rXU(u.n),e.rXU(v.Vh),e.rXU(h.Q))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-dialogAdd-request"]],decls:1,vars:1,consts:[["class","col-xl-12",3,"dir",4,"ngIf"],[1,"col-xl-12",3,"dir"],[1,"card"],[1,"card-body"],["action","javascript:",3,"formGroup"],[1,"row"],[1,"form-group","col-md-6"],[3,"optionSelected","fetchData","data","displayKey","pageSize","placeholder"],["type","date","formControlName","startDate",1,"form-control"],["type","date","formControlName","endDate",1,"form-control"],[1,"form-group","col-md-12"],["type","text","required","","formControlName","description","id","description",1,"form-control"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"]],template:function(s,i){1&s&&e.DNE(0,q,28,12,"div",0),2&s&&e.Y8G("ngIf",!i.data.show)},dependencies:[a.bT,T.ig,d.qT,d.me,d.BC,d.cb,d.YS,d.j4,d.JD,b.m],styles:["mat-dialog-content[_ngcontent-%COMP%]{font-size:16px;color:#333}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})}return n})();var w=r(2802),k=r(6695),g=r(9159),A=r(4412),S=r(6496),G=r(8141);let I=(()=>{class n{constructor(t,s){this.sharedFacade=t,this.timeOffRequestServices=s,this.TimeOffRequestSubject=new A.t(w.A),this.TimeOffAddRequestSubject=new A.t(0),this.TimeOffAddRequest$=this.TimeOffAddRequestSubject.asObservable()}AddTimeOffRequest(t){const s=this.timeOffRequestServices.AddTimeOffRequest(t).pipe((0,G.M)(i=>{this.TimeOffAddRequestSubject.next(i.type),i.type==o.yl.Success?this.sharedFacade.showMessage(o.Go.success,"\u062a\u0645 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0628\u0646\u062c\u0627\u062d",i.messages):this.sharedFacade.showMessage(o.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0637\u0644\u0628",i.messages)}),(0,S.t)());this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe()}GetMyTimeOffRequests(t,s,i){const l=this.timeOffRequestServices.GetMyTimeOffRequests(t,s,i).pipe((0,G.M)(p=>{p.type==o.yl.Success?this.TimeOffRequestSubject.next(p.content):(this.TimeOffRequestSubject.next(w.A),this.sharedFacade.showMessage(o.Go.warning," \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",p.messages))}),(0,S.t)());this.sharedFacade.showLoaderUntilCompleted(l).pipe().subscribe()}DeleteTimeOffRequest(t){const s=this.timeOffRequestServices.DeleteTimeOffRequest(t).pipe((0,G.M)(i=>{if(i.type==o.yl.Success){this.sharedFacade.showMessage(o.Go.success," \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",["\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u0628\u0646\u062c\u0627\u062d"]);const l=this.TimeOffRequestSubject.getValue(),p=l.items.filter(_=>_.id!=t);this.TimeOffRequestSubject.next({...l,items:p})}else this.sharedFacade.showMessage(o.Go.error,"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",i.messages)}),(0,S.t)());this.sharedFacade.showLoaderUntilCompleted(s).pipe().subscribe()}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(m.I),e.KVO(O))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var P=r(2016),V=r(2702),Y=r(9213),F=r(3391);const U=()=>[5,10,20];function B(n,c){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=c.$implicit;e.R7$(),e.JRh(t)}}function X(n,c){if(1&n&&(e.j41(0,"div",21),e.EFF(1),e.k0s()),2&n){const t=c.$implicit;e.R7$(),e.SpI(" ",t.label," ")}}function z(n,c){if(1&n&&(e.j41(0,"div")(1,"span"),e.EFF(2),e.k0s(),e.DNE(3,X,2,1,"div",20),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.date),e.R7$(),e.Y8G("ngForOf",t.timeOffs)}}function L(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.openDayDialog(i))}),e.DNE(1,z,4,2,"div",19),e.k0s()}if(2&n){const t=c.$implicit;e.AVh("blank",!t.date),e.R7$(),e.Y8G("ngIf",t.date)}}function K(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeMonth(1))}),e.EFF(3,"\u2039"),e.k0s(),e.j41(4,"h3"),e.EFF(5),e.k0s(),e.j41(6,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeMonth(-1))}),e.EFF(7,"\u203a"),e.k0s()(),e.j41(8,"div",14),e.DNE(9,B,2,1,"div",15),e.k0s(),e.j41(10,"div",16),e.DNE(11,L,2,3,"div",17),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(5),e.Lme("",t.monthNames[t.currentMonth]," ",t.currentYear,""),e.R7$(4),e.Y8G("ngForOf",t.weekDays),e.R7$(2),e.Y8G("ngForOf",t.calendarDays)}}function J(n,c){if(1&n&&(e.j41(0,"th",32),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.title)}}function Q(n,c){if(1&n&&(e.j41(0,"td",31),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=c.$implicit,s=e.XpG(2).$implicit;e.R7$(),e.JRh(e.bMT(2,1,t[s.name]))}}function H(n,c){1&n&&e.DNE(0,Q,3,3,"td",33)}function W(n,c){if(1&n&&(e.j41(0,"td",31),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=c.$implicit,s=e.XpG(2).$implicit;e.R7$(),e.JRh(e.i5U(2,1,t[s.name],"yyyy/MM/dd hh:mm a"))}}function Z(n,c){1&n&&e.DNE(0,W,3,4,"td",33)}function ee(n,c){if(1&n&&(e.j41(0,"td",31),e.EFF(1),e.k0s()),2&n){const t=c.$implicit,s=e.XpG(2).$implicit;e.R7$(),e.JRh(t[s.name])}}function te(n,c){1&n&&e.DNE(0,ee,2,1,"td",33)}function ne(n,c){if(1&n&&(e.qex(0,29),e.DNE(1,J,2,1,"th",30)(2,H,1,0,"td",31)(3,Z,1,0,"td",31)(4,te,1,0,"td",31),e.bVm()),2&n){const t=c.$implicit;e.Y8G("matColumnDef",t.name),e.R7$(2),e.vxM("date"===(null==t?null:t.pipe)?2:-1),e.R7$(),e.vxM("datetime"===(null==t?null:t.pipe)?3:-1),e.R7$(),e.vxM(null!=t&&t.pipe?-1:4)}}function ie(n,c){1&n&&(e.j41(0,"th",32),e.EFF(1,"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"),e.k0s())}function ae(n,c){if(1&n){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.DeleteTimeOffRequest(i.id))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function se(n,c){if(1&n&&(e.j41(0,"td",31),e.DNE(1,ae,3,0,"button",35),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.sharedFacade.hasPermission("DeleteTimeOffRequest"))}}function oe(n,c){1&n&&(e.qex(0,34),e.DNE(1,ie,2,0,"th",30)(2,se,2,1,"td",33),e.bVm())}function re(n,c){1&n&&e.nrm(0,"tr",37)}function le(n,c){1&n&&e.nrm(0,"tr",38)}function ce(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"table",23),e.DNE(2,ne,5,4,"ng-container",24)(3,oe,3,0,"ng-container",25)(4,re,1,0,"tr",26)(5,le,1,0,"tr",27),e.k0s(),e.j41(6,"mat-paginator",28),e.bIt("page",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onPageChange(i))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("dataSource",t.dataSource),e.R7$(),e.Y8G("ngForOf",t.tabs[t.currentTabNumber].displayColumns),e.R7$(),e.Y8G("ngIf",0===t.currentTabNumber),e.R7$(),e.Y8G("matHeaderRowDef",t.getDisplayColumns(t.currentTabNumber)),e.R7$(),e.Y8G("matRowDefColumns",t.getDisplayColumns(t.currentTabNumber)),e.R7$(),e.Y8G("pageIndex",t.currentPage)("length",t.totalCount)("pageSize",t.pageSize)("pageSizeOptions",e.lJ4(9,U))}}const ue=[{path:"",component:(()=>{class n{constructor(t,s,i,l,p){this.dialog=t,this.employeeFacade=s,this.sharedFacade=i,this.timeOffRequestFacade=l,this.cdr=p,this.activeTab=1,this.currentTabNumber=0,this.leaveBalances=[{type:"\u0625\u062c\u0627\u0632\u0627\u062a \u0645\u0631\u062d\u0644\u0629 \u0645\u0646 \u0627\u0644\u0639\u0627\u0645 2023",used:2.5,total:26,taken:23.5,expiry:"03/31/2024"},{type:"\u0625\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 2024",used:10,total:30,taken:20,expiry:"12/31/2024"},{type:"\u0625\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 \u0639\u0627\u0631\u0636\u0629 2024",used:3,total:8,taken:5,expiry:"12/31/2024"},{type:"\u0625\u062c\u0627\u0632\u0629 \u0627\u0644\u0637\u0627\u0631\u0626\u0629",used:9,total:9,taken:0,expiry:"12/31/2024"},{type:"\u0631\u0627\u062d\u0629 \u0637\u0628\u064a\u0629",used:0,total:7,taken:7,expiry:""}],this.currentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth(),this.calendarDays=[],this.weekDays=["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0625\u062b\u0646\u064a\u0646","\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0625\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062e\u0645\u064a\u0633","\u0627\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.timeOffData=[],this.displayColumns=["employeeName","vacationTypeName","startDate","endDate","createdDate","directSupervisorName","departmentManagerName","personnelAffairsName","actions","personnelAffairsApprovedDate"],this.tabs=[{title:"\u0637\u0644\u0628\u0627\u062a \u0642\u064a\u062f \u0627\u0644\u0625\u0646\u062a\u0638\u0627\u0631",activeTab:1,tabNumber:0,displayColumns:[{name:"employeeName",title:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"},{name:"vacationTypeName",title:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"},{name:"startDate",title:"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"endDate",title:"\u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"createdDate",title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",pipe:"datetime"}]},{title:"\u0637\u0644\u0628\u0627\u062a \u0645\u0642\u0628\u0648\u0644\u0629",activeTab:2,tabNumber:1,displayColumns:[{name:"employeeName",title:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"},{name:"vacationTypeName",title:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"},{name:"startDate",title:"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"endDate",title:"\u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"createdDate",title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",pipe:"datetime"},{name:"directSupervisorName",title:"\u0645\u0648\u0627\u0641\u0642\u0629 \u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0628\u0627\u0634\u0631"},{name:"departmentManagerName",title:"\u0645\u0648\u0627\u0641\u0642\u0629 \u0645\u062f\u064a\u0631 \u0627\u0644\u0625\u062f\u0627\u0631\u0629"}]},{title:"\u0637\u0644\u0628\u0627\u062a \u0645\u0631\u0641\u0648\u0636\u0629",activeTab:3,tabNumber:3,displayColumns:[{name:"employeeName",title:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"},{name:"vacationTypeName",title:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"},{name:"startDate",title:"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"endDate",title:"\u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"createdDate",title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",pipe:"datetime"},{name:"directSupervisorName",title:"\u0631\u0641\u0636 \u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0628\u0627\u0634\u0631"},{name:"departmentManagerName",title:"\u0631\u0641\u0636 \u0645\u062f\u064a\u0631 \u0627\u0644\u0625\u062f\u0627\u0631\u0629"},{name:"personnelAffairsName",title:"\u0631\u0641\u0636 \u0634\u0624\u0648\u0646 \u0627\u0644\u0625\u062f\u0627\u0631\u064a\u0629"}]},{title:"\u0637\u0644\u0628\u0627\u062a \u0645\u0639\u062a\u0645\u062f\u0629 \u0645\u0646 \u0634\u0624\u0648\u0646 \u0627\u0644\u0639\u0627\u0645\u0644\u064a\u0646",activeTab:4,tabNumber:2,displayColumns:[{name:"employeeName",title:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"},{name:"vacationTypeName",title:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"},{name:"startDate",title:"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"endDate",title:"\u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0629",pipe:"date"},{name:"createdDate",title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",pipe:"datetime"},{name:"directSupervisorName",title:"\u0642\u0628\u0648\u0644 \u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0628\u0627\u0634\u0631"},{name:"departmentManagerName",title:"\u0642\u0628\u0648\u0644 \u0645\u062f\u064a\u0631 \u0627\u0644\u0625\u062f\u0627\u0631\u0629"},{name:"personnelAffairsName",title:"\u0627\u0639\u062a\u0645\u0627\u062f \u0634\u0624\u0648\u0646 \u0627\u0644\u0625\u062f\u0627\u0631\u064a\u0629"},{name:"personnelAffairsApprovedDate",title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0639\u062a\u0645\u0627\u062f \u0634\u0624\u0648\u0646 \u0627\u0644\u0625\u062f\u0627\u0631\u064a\u0629",pipe:"datetime"}]}],this.dataSource=new g.I6,this.totalCount=0,this.pageSize=10,this.currentPage=0}ngOnInit(){this.dataSource.paginator=this.paginator,this.generateCalendar(),this.timeOffRequestFacade.TimeOffRequestSubject.subscribe(t=>{this.dataSource.data=t.items,this.totalCount=t.totalCount})}ngAfterViewInit(){this.switchToTab(1,0)}openDayDialog(t){t.date&&(this.dialog.openDialogs.length>0&&this.dialog.closeAll(),this.dialog.open(E,{width:"600px",height:"450px",data:{date:`${t.date}/${this.currentMonth+1}/${this.currentYear}`,timeOffs:t.timeOffs,extra:null},panelClass:"custom-dialog-container"}).afterClosed().subscribe(i=>{i&&(this.timeOffRequestFacade.AddTimeOffRequest(i.extra),this.timeOffData.push({date:i.date,label:i.timeOffs}),this.switchToTab(1,0),this.timeOffRequestFacade.TimeOffAddRequest$.subscribe(l=>{null!=l&&setTimeout(()=>{1==l&&this.switchToTab(1,0)})}),this.generateCalendar(),this.cdr.detectChanges())}))}getDisplayColumns(t){return this.tabs[t].displayColumns.map(({name:s})=>s)}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadTimeOffRequests(this.currentPage+1,this.pageSize)}loadTimeOffRequests(t,s){this.timeOffRequestFacade.GetMyTimeOffRequests(t,s,this.currentTabNumber)}switchToTab(t,s){this.activeTab=t,this.currentTabNumber=s,this.paginator&&this.paginator.firstPage(),this.timeOffRequestFacade.TimeOffRequestSubject.next(w.A),this.loadTimeOffRequests(1,10)}DeleteTimeOffRequest(t){this.timeOffRequestFacade.DeleteTimeOffRequest(t)}generateCalendar(){const t=new Date(this.currentYear,this.currentMonth,1).getDay(),s=new Date(this.currentYear,this.currentMonth+1,0).getDate();this.calendarDays=[];for(let i=t-1;i>=0;i--)this.calendarDays.push({date:null,timeOffs:[]});for(let i=1;i<=s;i++){new Date(this.currentYear,this.currentMonth,i);const p=this.timeOffData.filter(_=>{const C=new Date(_.date);return C.getFullYear()===this.currentYear&&C.getMonth()===this.currentMonth&&C.getDate()===i}).map(_=>({label:_.label}));this.calendarDays.push({date:i,timeOffs:p})}for(;this.calendarDays.length%7!=0;)this.calendarDays.push({date:null,timeOffs:[]})}changeMonth(t){this.currentMonth+=t,this.currentMonth>11?(this.currentMonth=0,this.currentYear++):this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}onDelete(t){confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0644\u063a\u0627\u0621\u061f")}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.bZ),e.rXU(u.n),e.rXU(m.I),e.rXU(I),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-rewards-types"]],viewQuery:function(s,i){if(1&s&&e.GBs(k.iy,5),2&s){let l;e.mGM(l=e.lsd())&&(i.paginator=l.first)}},decls:24,vars:7,consts:[["nav1","ngbNav"],[1,"row"],["class","calendar-container",4,"ngIf"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"mb-3"],["ngbNav","",1,"nav","nav-pills","mb-3",3,"activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","",1,"nav-link",3,"click"],["class","table-responsive",4,"ngIf"],[1,"calendar-container"],[1,"calendar-header"],["type","button",1,"btn","drp-icon","btn-rounded","btn-themeAdd",3,"click"],[1,"weekdays"],[4,"ngFor","ngForOf"],[1,"dates"],["class","date",3,"blank","click",4,"ngFor","ngForOf"],[1,"date",3,"click"],[4,"ngIf"],["class","time-off",4,"ngFor","ngForOf"],[1,"time-off"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageIndex","length","pageSize","pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell",""],["mat-header-cell",""],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",1),e.nrm(1,"app-loading")(2,"app-messages"),e.DNE(3,K,12,4,"div",2),e.k0s(),e.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e.EFF(8,"\u0625\u062c\u0627\u0632\u0627\u062a"),e.k0s(),e.j41(9,"ul",7,0),e.mxI("activeIdChange",function(_){return e.eBV(l),e.DH7(i.activeTab,_)||(i.activeTab=_),e.Njj(_)}),e.j41(11,"li",8)(12,"a",9),e.bIt("click",function(){return e.eBV(l),e.Njj(i.switchToTab(1,0))}),e.EFF(13,"\u0637\u0644\u0628\u0627\u062a \u0642\u064a\u062f \u0627\u0644\u0625\u0646\u062a\u0638\u0627\u0631"),e.k0s()(),e.j41(14,"li",8)(15,"a",9),e.bIt("click",function(){return e.eBV(l),e.Njj(i.switchToTab(2,1))}),e.EFF(16,"\u0637\u0644\u0628\u0627\u062a \u0645\u0642\u0628\u0648\u0644\u0629"),e.k0s()(),e.j41(17,"li",8)(18,"a",9),e.bIt("click",function(){return e.eBV(l),e.Njj(i.switchToTab(4,2))}),e.EFF(19,"\u0637\u0644\u0628\u0627\u062a \u0645\u0639\u062a\u0645\u062f\u0629 \u0645\u0646 \u0634\u0624\u0648\u0646 \u0627\u0644\u0639\u0627\u0645\u0644\u064a\u0646"),e.k0s()(),e.j41(20,"li",8)(21,"a",9),e.bIt("click",function(){return e.eBV(l),e.Njj(i.switchToTab(3,3))}),e.EFF(22,"\u0637\u0644\u0628\u0627\u062a \u0645\u0631\u0641\u0648\u0636\u0629"),e.k0s()()()()(),e.DNE(23,ce,7,10,"div",10),e.k0s()}2&s&&(e.R7$(3),e.Y8G("ngIf",i.sharedFacade.hasPermission("AddTimeOffRequest")),e.R7$(6),e.R50("activeId",i.activeTab),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(3),e.Y8G("ngIf",i.tabs[i.currentTabNumber]))},dependencies:[a.Sq,a.bT,D.iY,P.q,V.y,Y.An,k.iy,g.Zl,g.tL,g.ji,g.cC,g.YV,g.iL,g.KS,g.$R,g.YZ,g.NB,F.X9,F.Ri,F.sy,a.vh],styles:[".calendar-container[_ngcontent-%COMP%]{margin:0 auto;text-align:center;width:87%;height:87%}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;margin-bottom:10px}.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background-color:#f5f5f5;padding:10px 0;font-weight:700}.dates[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:5px}.date[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;border:1px solid #ddd;padding:10px;position:relative;height:120px;width:100%;background-color:#fff;box-sizing:border-box}.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.time-off[_ngcontent-%COMP%]{background:linear-gradient(-135deg,#d74b4b,#c8a0ac);color:#fff;padding:5px 8px;margin-top:5px;border-radius:4px;font-size:14px;width:90%;text-align:center;word-wrap:break-word}.dates[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{background-color:#f9f9f9;height:120px}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background-color:#f5f5f5;padding:10px 0;border-bottom:1px solid #ddd}.leave-summary[_ngcontent-%COMP%]{text-align:center}.leave-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#7c4dff;font-size:18px}.leave-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:16px;color:#333}.leave-summary[_ngcontent-%COMP%]   .taken[_ngcontent-%COMP%]{color:#007bff;font-size:14px}  .custom-dialog-container{position:absolute!important;top:40%!important;left:50%!important;transform:translate(-50%,-50%)!important;max-height:90vh;max-width:90vw;overflow-y:auto;padding:20px;border-radius:8px}"]})}return n})(),data:{breadcrumb:"\u0637\u0644\u0628 \u0625\u062c\u0627\u0632\u0629"}}];let de=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[f.iI.forChild(ue),f.iI]})}return n})();var me=r(9183),pe=r(7591),fe=r(5842),he=r(2798),ge=r(2765),_e=r(9947),ve=r(3782);let ye=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[I,O,u.n,fe.v,h.Q,ve.C],imports:[a.MD,D.Hl,j.RG,M.fS,y.uc,d.X1,de,me.D6,pe.G,d.YN,he.Ve,ge.g7,_e.i,F.m_,v.hM]})}return n})()},6661:($,R,r)=>{r.d(R,{m:()=>O});var a=r(3953),D=r(9417),j=r(1413),M=r(152),y=r(177);const d=["dropdownMenu"];function e(f,v){if(1&f){const o=a.RV6();a.j41(0,"li")(1,"a",8),a.bIt("mousedown",function(){const u=a.eBV(o).$implicit,h=a.XpG();return a.Njj(h.onSelectionChange(u))}),a.EFF(2),a.k0s()()}if(2&f){const o=v.$implicit,m=a.XpG();a.R7$(2),a.SpI(" ",o[m.displayKey]," ")}}function x(f,v){1&f&&(a.j41(0,"li",9)(1,"div",10)(2,"span",11),a.EFF(3,"Loading..."),a.k0s()()())}function N(f,v){1&f&&(a.j41(0,"li",12)(1,"small"),a.EFF(2,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),a.k0s()())}let O=(()=>{class f{constructor(){this.pageSize=10,this.placeholder="\u0627\u062e\u062a\u0631 \u062e\u064a\u0627\u0631\u0627\u064b",this.optionSelected=new a.bkB,this.items=[],this.currentPage=1,this.totalCount=0,this.loading=!1,this.isDisabled=!1,this.searchQuery="",this.selectedOption=null,this.searchSubject=new j.B,this.onChange=()=>{},this.onTouched=()=>{},this.searchSubject.pipe((0,M.B)(500)).subscribe(o=>{this.searchQuery=o,this.currentPage=1,this.fetchData(this.currentPage,this.pageSize,o)})}ngOnChanges(o){o.data&&this.data&&this.handleData()}handleData(){this.data.subscribe(o=>{this.items=1===this.currentPage?o.items:[...this.items,...o.items],this.totalCount=o.totalCount,this.loading=!1})}onScroll(o){const m=o.target;m.scrollTop+m.clientHeight+5>=m.scrollHeight&&!this.loading&&this.items.length<this.totalCount&&(this.loading=!0,this.currentPage++,this.fetchData(this.currentPage,this.pageSize,this.searchQuery))}onSelectionChange(o){this.onChange(this.formControlNameSpecificAccessAttribute?o[this.formControlNameSpecificAccessAttribute]:o),this.selectedOption=o,this.optionSelected.emit(o),this.onTouched(),this.closeDropdown()}toggleDropdown(){if(this.isDisabled)return;const o=this.dropdownMenu.nativeElement;o.style.display="block"===o.style.display?"none":"block"}closeDropdown(){setTimeout(()=>{this.dropdownMenu.nativeElement.style.display="none"},150)}onSearch(o){this.searchSubject.next(o)}writeValue(o){this.selectedOption=o}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.isDisabled=o}static#e=this.\u0275fac=function(m){return new(m||f)};static#t=this.\u0275cmp=a.VBU({type:f,selectors:[["app-dynamic-dropdown"]],viewQuery:function(m,u){if(1&m&&a.GBs(d,5),2&m){let h;a.mGM(h=a.lsd())&&(u.dropdownMenu=h.first)}},inputs:{fetchData:"fetchData",data:"data",displayKey:"displayKey",pageSize:"pageSize",placeholder:"placeholder",ngClass:"ngClass",formControlNameSpecificAccessAttribute:"formControlNameSpecificAccessAttribute"},outputs:{optionSelected:"optionSelected"},features:[a.Jv_([{provide:D.kq,useExisting:(0,a.Rfq)(()=>f),multi:!0}]),a.OA$],decls:10,vars:8,consts:[["dropdownContainer",""],["dropdownMenu",""],[1,"dropdown","w-100"],["type","text","readonly","","required","",1,"form-control",3,"blur","click","input","value","disabled","placeholder","ngClass"],[1,"dropdown-menu","w-100","overflow-auto",2,"max-height","250px","min-width","100%","display","none",3,"scroll"],[4,"ngFor","ngForOf"],["class","text-center py-2",4,"ngIf"],["class","text-center py-2 text-muted",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item",3,"mousedown"],[1,"text-center","py-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-2","text-muted"]],template:function(m,u){if(1&m){const h=a.RV6();a.j41(0,"div",2,0)(2,"label"),a.EFF(3),a.k0s(),a.j41(4,"input",3),a.bIt("blur",function(){return a.eBV(h),a.Njj(u.closeDropdown())})("click",function(){return a.eBV(h),a.Njj(u.toggleDropdown())})("input",function(b){return a.eBV(h),a.Njj(u.onSearch(b.target.value))}),a.k0s(),a.j41(5,"ul",4,1),a.bIt("scroll",function(b){return a.eBV(h),a.Njj(u.onScroll(b))}),a.DNE(7,e,3,1,"li",5)(8,x,4,0,"li",6)(9,N,3,0,"li",7),a.k0s()()}2&m&&(a.R7$(3),a.JRh(u.placeholder),a.R7$(),a.FS9("placeholder",u.placeholder),a.Y8G("value",u.selectedOption?u.selectedOption[u.displayKey]:"")("disabled",u.isDisabled)("ngClass",u.ngClass),a.R7$(3),a.Y8G("ngForOf",u.items),a.R7$(),a.Y8G("ngIf",u.loading),a.R7$(),a.Y8G("ngIf",0===u.items.length&&!u.loading))},dependencies:[y.YU,y.Sq,y.bT],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.loading-option[_ngcontent-%COMP%]{font-style:italic;text-align:center;color:gray}.custom-panel[_ngcontent-%COMP%]{max-height:200px!important;overflow:hidden!important}.cdk-virtual-scroll-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]})}return f})()}}]);