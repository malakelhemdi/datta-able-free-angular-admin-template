<div class="row">
  <app-loading></app-loading>
  <app-messages></app-messages>

  <div class="card">
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="form-group">
            <div class="form-group col-md-6">
              <!-- <label for="organizationalUnit">الوحدات التنظيمية</label> -->
              <!-- <app-typeahead-input
                [placeholder]="'الوحدات التنظيمية...'"
                [control]="form.controls['organizationalUnit']"
                [searchHandler]="organizationalUnitSearchHandler"
                [resultFormatter]="nameFormatter"
                [inputFormatter]="nameFormatter"
              ></app-typeahead-input> -->

              <!-- <app-typeahead-input
                [placeholder]="'الوحدات التنظيمية...'"
                [control]="form.controls['organizationalUnit']"
                [searchHandler]="organizationalUnitSearchHandler"
                [resultFormatter]="allOrganizationalUnitsFormatter"
                [inputFormatter]="allOrganizationalUnitsFormatter"
              ></app-typeahead-input> -->

              <app-dynamic-dropdown
                [fetchData]="loadOrganizationalUnits.bind(this)"
                [data]="organizationalUnitFacade.OrganizationalUnitSubject$"
                [displayKey]="'name'"
                [pageSize]="10"
                [placeholder]="'الوحدات التنظيمية'"
                (optionSelected)="onOrganizationalUnitsSelected($event)"
              ></app-dynamic-dropdown>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <div class="form-group col-md-4">
            <!-- <select formControlName="directManager" class="form-select" required id="directManager" [compareWith]="compareById">
              <option *ngFor="let employee of employees | async" [ngValue]="employee">{{ employee.name }}</option>
            </select> -->
            <!-- <input
              name="directManager"
              formControlName="directManager"
              id="directManager"
              type="text"
              class="form-control"
              required
              [ngbTypeahead]="directManagerSearch"
              (focus)="directManagerFocus$.next($any($event).target.value)"
              (click)="directManagerClick$.next($any($event).target.value)"
              [resultFormatter]="allOrganizationalUnitsFormatter"
              [inputFormatter]="allOrganizationalUnitsFormatter"
              #instance="ngbTypeahead"
            /> -->

            <app-dynamic-dropdown
              [fetchData]="loadEmployees.bind(this)"
              [data]="employees"
              [displayKey]="'name'"
              [pageSize]="10"
              [placeholder]="'المدير المباشر'"
              (optionSelected)="onDirectManagerSelect($event)"
            ></app-dynamic-dropdown>
          </div>
          <div class="form-group col-md-4">
            <!-- <select formControlName="higherLevelManager" class="form-select" required id="higherLevelManager" [compareWith]="compareById">
              <option *ngFor="let employee of employees | async" [ngValue]="employee">{{ employee.name }}</option>
            </select> -->
            <!-- higherLevelManager -->
            <!-- departmentManager -->
            <!-- <app-typeahead-input
              [placeholder]="'المدير الأعلى...'"
              [control]="form.controls['higherLevelManager']"
              [searchHandler]="searchHandler"
              [resultFormatter]="nameFormatter"
              [inputFormatter]="nameFormatter"
            ></app-typeahead-input> -->
            <app-dynamic-dropdown
              [fetchData]="loadEmployees.bind(this)"
              [data]="employees"
              [displayKey]="'name'"
              [pageSize]="10"
              [placeholder]="'المدير الأعلى'"
              (optionSelected)="onHigherLevelManagerSelect($event)"
            ></app-dynamic-dropdown>
          </div>
          <div class="form-group col-md-4">
            <!-- <select formControlName="departmentManager" class="form-select" required id="departmentManager" [compareWith]="compareById">
              <option *ngFor="let employee of employees | async" [ngValue]="employee">{{ employee.name }}</option>
            </select> -->

            <!-- <app-typeahead-input
              [placeholder]="'مدير الإدارة...'"
              [control]="form.controls['departmentManager']"
              [searchHandler]="searchHandler"
              [resultFormatter]="nameFormatter"
              [inputFormatter]="nameFormatter"
            ></app-typeahead-input> -->
            <app-dynamic-dropdown
              [fetchData]="loadEmployees.bind(this)"
              [data]="employees"
              [displayKey]="'name'"
              [pageSize]="10"
              [placeholder]="'مدير الإدارة'"
              (optionSelected)="onDepartmentManagerSelect($event)"
            ></app-dynamic-dropdown>
          </div>
        </div>

        <button type="submit" class="btn btn-md btn-themeAdd has-ripple">حفظ</button>
      </form>
    </div>
  </div>
</div>
